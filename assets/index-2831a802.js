var e=Object.defineProperty,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(r,t,n)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,s=(e,s)=>{for(var i in s||(s={}))t.call(s,i)&&o(e,i,s[i]);if(r)for(var i of r(s))n.call(s,i)&&o(e,i,s[i]);return e},i=(e,r,t)=>(o(e,"symbol"!=typeof r?r+"":r,t),t),a=(e,r,t)=>new Promise((n,o)=>{var s=e=>{try{a(t.next(e))}catch(r){o(r)}},i=e=>{try{a(t.throw(e))}catch(r){o(r)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,i);a((t=t.apply(e,r)).next())});import{r as l,a as c,R as d}from"./vendor-ed70b211.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)}).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();var h={exports:{}},x={},u=l,p=Symbol.for("react.element"),m=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,g=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function j(e,r,t){var n,o={},s=null,i=null;for(n in void 0!==t&&(s=""+t),void 0!==r.key&&(s=""+r.key),void 0!==r.ref&&(i=r.ref),r)f.call(r,n)&&!y.hasOwnProperty(n)&&(o[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===o[n]&&(o[n]=r[n]);return{$$typeof:p,type:e,key:s,ref:i,props:o,_owner:g.current}}x.Fragment=m,x.jsx=j,x.jsxs=j,h.exports=x;var v=h.exports,w={},b=c;w.createRoot=b.createRoot,w.hydrateRoot=b.hydrateRoot;const k={},E=function(e,r,t){if(!r||0===r.length)return e();const n=document.getElementsByTagName("link");return Promise.all(r.map(e=>{if((e=function(e){return"/"+e}(e))in k)return;k[e]=!0;const r=e.endsWith(".css"),o=r?'[rel="stylesheet"]':"";if(!!t)for(let t=n.length-1;t>=0;t--){const o=n[t];if(o.href===e&&(!r||"stylesheet"===o.rel))return}else if(document.querySelector(`link[href="${e}"]${o}`))return;const s=document.createElement("link");return s.rel=r?"stylesheet":"modulepreload",r||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),r?new Promise((r,t)=>{s.addEventListener("load",r),s.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=e,window.dispatchEvent(r),!r.defaultPrevented)throw e})},S={default:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),v.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),v.jsx("polyline",{points:"21,15 16,10 5,21"})]}),home:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),v.jsx("polyline",{points:"9,22 9,12 15,12 15,22"})]}),music:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M9 18V5l12-2v13"}),v.jsx("circle",{cx:"6",cy:"18",r:"3"}),v.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),settings:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("circle",{cx:"12",cy:"12",r:"3"}),v.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),user:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),v.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),headphones:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M3 18v-6a9 9 0 0 1 18 0v6"}),v.jsx("path",{d:"M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"})]}),mic:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),v.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),v.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),v.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}),volume2:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),v.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),v.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]}),play:()=>v.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),pause:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),v.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}),upload:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),v.jsx("polyline",{points:"7,10 12,15 17,10"}),v.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),download:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),v.jsx("polyline",{points:"7,10 12,15 17,10"}),v.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),trash:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("polyline",{points:"3,6 5,6 21,6"}),v.jsx("path",{d:"M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"})]}),edit:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),search:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("circle",{cx:"11",cy:"11",r:"8"}),v.jsx("path",{d:"M21 21l-4.35-4.35"})]}),close:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),check:()=>v.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("polyline",{points:"20,6 9,17 4,12"})}),alert:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),v.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),v.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),info:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),v.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),zap:()=>v.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),circleDot:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),menu:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),v.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),v.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),chevronRight:()=>v.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("polyline",{points:"9,18 15,12 9,6"})}),chevronLeft:()=>v.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("polyline",{points:"15,18 9,12 15,6"})}),arrowRight:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),v.jsx("polyline",{points:"12,5 19,12 12,19"})]}),arrowLeft:()=>v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),v.jsx("polyline",{points:"12,19 5,12 12,5"})]})};const C=new class{constructor(){this.iconCache=new Map,this.fallbackIcon=S.default}renderIcon(e,r={}){try{if(this.iconCache.has(e)){const t=this.iconCache.get(e);return v.jsx(t,s({},r))}if(S[e]){const t=S[e];return this.iconCache.set(e,t),v.jsx(t,s({},r))}return this.loadLucideIcon(e).then(r=>{r&&this.iconCache.set(e,r)}).catch(()=>{console.warn(`אייקון לא נמצא: ${e}, משתמש באייקון ברירת מחדל`)}),v.jsx(this.fallbackIcon,s({},r))}catch(t){return console.error(`שגיאה ברנדור אייקון ${e}:`,t),v.jsx(this.fallbackIcon,s({},r))}}loadLucideIcon(e){return a(this,null,function*(){try{const r=yield E(()=>import("./icons-3130b023.js"),["assets/icons-3130b023.js","assets/vendor-ed70b211.js"]);if(r[e])return r[e];const t=this.adaptIconName(e);return r[t]?r[t]:null}catch(r){return console.warn(`לא ניתן לטעון אייקון ${e} מ-lucide-react:`,r),null}})}adaptIconName(e){return{headphones:"Headphones",menuItems:"Menu",mic:"Mic",volume2:"Volume2",play:"Play",pause:"Pause",upload:"Upload",download:"Download",trash:"Trash2",edit:"Edit",search:"Search",close:"X",check:"Check",alert:"AlertTriangle",info:"Info",zap:"Zap",circleDot:"CircleDot",chevronRight:"ChevronRight",chevronLeft:"ChevronLeft",arrowRight:"ArrowRight",arrowLeft:"ArrowLeft"}[e]||e}getFallbackIcon(){return this.fallbackIcon}clearCache(){this.iconCache.clear()}getCacheStatus(){return{cachedIcons:Array.from(this.iconCache.keys()),cacheSize:this.iconCache.size}}},_=e=>{var o=e,{name:s}=o,i=((e,o)=>{var s={};for(var i in e)t.call(e,i)&&o.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&r)for(var i of r(e))o.indexOf(i)<0&&n.call(e,i)&&(s[i]=e[i]);return s})(o,["name"]);return C.renderIcon(s,i)};d.Component;const N=new class{constructor(){this.isInitialized=!1,this.errorCount=0,this.maxErrors=10,this.errorWindow=6e4,this.lastErrorTime=0}initialize(){try{this.setupGlobalErrorHandling(),this.setupUnhandledRejectionHandling(),this.setupConsoleErrorHandling(),this.isInitialized=!0,console.log("✅ SafetyGuards initialized successfully")}catch(e){console.error("❌ Failed to initialize SafetyGuards:",e)}}setupGlobalErrorHandling(){if("undefined"!=typeof window){const e=window.onerror;window.onerror=(r,t,n,o,s)=>(this.handleError("Global Error",{message:r,source:t,lineno:n,colno:o,error:(null==s?void 0:s.stack)||"No stack trace"}),!!e&&e(r,t,n,o,s))}}setupUnhandledRejectionHandling(){if("undefined"!=typeof window){const e=window.onunhandledrejection;window.onunhandledrejection=r=>{var t,n;if(this.handleError("Unhandled Promise Rejection",{message:(null==(t=r.reason)?void 0:t.message)||"Unknown promise rejection",stack:(null==(n=r.reason)?void 0:n.stack)||"No stack trace"}),e)return e(r);r.preventDefault()}}}setupConsoleErrorHandling(){if("undefined"!=typeof console){const e=console.error,r=console.warn;console.error=(...r)=>{this.handleError("Console Error",{message:r.map(e=>String(e)).join(" "),args:r}),e.apply(console,r)},console.warn=(...e)=>{this.handleError("Console Warning",{message:e.map(e=>String(e)).join(" "),args:e}),r.apply(console,e)}}}handleError(e,r){try{const t=Date.now();t-this.lastErrorTime>this.errorWindow&&(this.errorCount=0),this.errorCount++,this.lastErrorTime=t,console.group(`🚨 SafetyGuards: ${e}`),console.error("Details:",r),console.error("Error count:",this.errorCount),console.error("Timestamp:",(new Date).toISOString()),console.groupEnd(),this.errorCount>this.maxErrors&&this.handleTooManyErrors(),this.sendErrorToServer(e,r)}catch(t){console.error("SafetyGuards error handler failed:",t)}}handleTooManyErrors(){console.error("🚨 Too many errors detected! Taking protective measures...");try{"undefined"!=typeof localStorage&&localStorage.clear(),"undefined"!=typeof sessionStorage&&sessionStorage.clear(),this.errorCount=0,this.showUserMessage()}catch(e){console.error("Failed to handle too many errors:",e)}}showUserMessage(){try{const e=document.createElement("div");e.style.cssText="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: #ef4444;\n        color: white;\n        padding: 16px;\n        border-radius: 8px;\n        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n        z-index: 999999;\n        max-width: 300px;\n        font-family: system-ui, -apple-system, sans-serif;\n      ",e.innerHTML='\n        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">\n          <span style="font-size: 20px;">⚠️</span>\n          <strong>בעיה במערכת</strong>\n        </div>\n        <p style="margin: 0; font-size: 14px;">\n          המערכת נתקלה בבעיות רבות. אנא רענן את הדף או פנה לתמיכה.\n        </p>\n        <button onclick="this.parentElement.remove()" style="\n          background: white;\n          color: #ef4444;\n          border: none;\n          padding: 8px 16px;\n          border-radius: 4px;\n          margin-top: 8px;\n          cursor: pointer;\n          font-weight: 500;\n        ">הבנתי</button>\n      ',document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},1e4)}catch(e){console.error("Failed to show user message:",e)}}sendErrorToServer(e,r){return a(this,null,function*(){try{yield fetch("/api/error-log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,details:r,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href,errorCount:this.errorCount})})}catch(t){}})}validateObject(e,r={}){try{return e&&"object"==typeof e&&!Array.isArray(e)?e:r}catch(t){return console.warn("Object validation failed:",t),r}}validateArray(e,r=[]){try{return Array.isArray(e)?e:r}catch(t){return console.warn("Array validation failed:",t),r}}validateFunction(e,r=()=>{}){try{return"function"==typeof e?e:r}catch(t){return console.warn("Function validation failed:",t),r}}validateString(e,r=""){try{return"string"==typeof e?e:r}catch(t){return console.warn("String validation failed:",t),r}}validateNumber(e,r=0){try{return"number"==typeof e&&!isNaN(e)&&isFinite(e)?e:r}catch(t){return console.warn("Number validation failed:",t),r}}validateBoolean(e,r=!1){try{return"boolean"==typeof e?e:r}catch(t){return console.warn("Boolean validation failed:",t),r}}safeExecute(e,r=null,...t){try{return"function"==typeof e?e(...t):r}catch(n){return this.handleError("Safe Execute Error",{message:n.message,stack:n.stack,function:e.toString(),args:t}),r}}safeExecuteAsync(e,r=null,...t){return a(this,null,function*(){try{return"function"==typeof e?yield e(...t):r}catch(n){return this.handleError("Safe Execute Async Error",{message:n.message,stack:n.stack,function:e.toString(),args:t}),r}})}getStatus(){return{isInitialized:this.isInitialized,errorCount:this.errorCount,maxErrors:this.maxErrors,lastErrorTime:this.lastErrorTime,timeSinceLastError:Date.now()-this.lastErrorTime}}resetErrorCount(){this.errorCount=0,this.lastErrorTime=0,console.log("✅ SafetyGuards error count reset")}cleanup(){try{this.errorCount=0,this.lastErrorTime=0,this.isInitialized=!1,console.log("🧹 SafetyGuards cleaned up")}catch(e){console.error("Failed to cleanup SafetyGuards:",e)}}},I=()=>v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-400 mx-auto mb-4"}),v.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"טוען KR-STUDIO"}),v.jsx("p",{className:"text-purple-200",children:"מכין את המערכת..."})]})});class R extends d.Component{constructor(e){super(e),i(this,"handleRetry",()=>{this.setState(e=>({hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1}))}),i(this,"handleReset",()=>{try{"undefined"!=typeof localStorage&&localStorage.clear(),"undefined"!=typeof sessionStorage&&sessionStorage.clear(),this.setState({hasError:!1,error:null,errorInfo:null,retryCount:0}),window.location.reload()}catch(e){console.error("Failed to reset:",e),window.location.reload()}}),i(this,"handleReload",()=>{window.location.reload()}),i(this,"toggleDetails",()=>{this.setState(e=>({showDetails:!e.showDetails}))}),this.state={hasError:!1,error:null,errorInfo:null,errorId:null,retryCount:0,showDetails:!1,componentStack:[]}}static getDerivedStateFromError(e){return{hasError:!0,errorId:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}componentDidCatch(e,r){console.error("AdvancedErrorBoundary caught an error:",e,r),this.setState({error:e,errorInfo:r,componentStack:r.componentStack.split("\n").filter(e=>e.trim())}),this.logError(e,r)}logError(e,r){try{const t={errorId:this.state.errorId,message:e.message,stack:e.stack,componentStack:r.componentStack,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href,retryCount:this.state.retryCount};console.group("🚨 KR-STUDIO Error Report"),console.error("Error ID:",t.errorId),console.error("Message:",t.message),console.error("Component Stack:",t.componentStack),console.error("Timestamp:",t.timestamp),console.groupEnd(),fetch("/api/error-log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(()=>{})}catch(t){console.error("Failed to log error:",t)}}render(){return this.state.hasError?v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"max-w-3xl w-full bg-white rounded-2xl shadow-2xl border border-red-200 overflow-hidden",children:[v.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 p-6 text-white",children:v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:v.jsx(_,{name:"alert",className:"w-6 h-6"})}),v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold",children:"שגיאה כללית - KR-STUDIO"}),v.jsx("p",{className:"text-red-100",children:"המערכת נתקלה בבעיה לא צפויה"})]})]})}),v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("div",{className:"bg-red-100 p-4 rounded-full inline-block mb-4",children:v.jsx(_,{name:"alert",className:"w-12 h-12 text-red-600"})}),v.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"משהו השתבש במערכת"}),v.jsx("p",{className:"text-gray-600 mb-4",children:"KR-STUDIO נתקל בשגיאה לא צפויה. אנא נסה שוב או פנה לתמיכה."}),this.state.error&&v.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-600 mb-4",children:[v.jsx("strong",{children:"שגיאה:"})," ",this.state.error.message]}),this.state.errorId&&v.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["מזהה שגיאה: ",this.state.errorId]}),this.state.retryCount>0&&v.jsxs("div",{className:"text-sm text-blue-600 mb-4",children:["ניסיונות: ",this.state.retryCount]})]}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[v.jsxs("button",{onClick:this.handleRetry,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2",children:[v.jsx(_,{name:"check",className:"w-4 h-4"}),v.jsx("span",{children:"נסה שוב"})]}),v.jsxs("button",{onClick:this.handleReload,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2",children:[v.jsx(_,{name:"refresh",className:"w-4 h-4"}),v.jsx("span",{children:"רענן דף"})]})]}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[v.jsxs("button",{onClick:this.handleReset,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2",children:[v.jsx(_,{name:"trash",className:"w-4 h-4"}),v.jsx("span",{children:"אפס מערכת"})]}),v.jsxs("button",{onClick:this.toggleDetails,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2",children:[v.jsx(_,{name:"info",className:"w-4 h-4"}),v.jsx("span",{children:this.state.showDetails?"הסתר פרטים":"הצג פרטים"})]})]}),this.state.showDetails&&v.jsxs("div",{className:"mt-6 space-y-4",children:[this.state.componentStack.length>0&&v.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[v.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Component Stack:"}),v.jsx("div",{className:"bg-gray-100 p-3 rounded text-xs overflow-x-auto max-h-40 overflow-y-auto",children:this.state.componentStack.map((e,r)=>v.jsx("div",{className:"font-mono text-gray-700",children:e},r))})]}),this.state.error&&this.state.error.stack&&v.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[v.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Error Stack:"}),v.jsx("div",{className:"bg-gray-100 p-3 rounded text-xs overflow-x-auto max-h-40 overflow-y-auto",children:v.jsx("pre",{className:"font-mono text-gray-700 whitespace-pre-wrap",children:this.state.error.stack})})]})]}),v.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[v.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"צריך עזרה?"}),v.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[v.jsx("li",{children:"• בדוק שהדפדפן מעודכן"}),v.jsx("li",{children:"• נסה לפתוח את האתר בדפדפן אחר"}),v.jsx("li",{children:"• נקה את המטמון של הדפדפן"}),v.jsx("li",{children:"• פנה לתמיכה עם מזהה השגיאה"}),v.jsx("li",{children:"• בדוק שהאינטרנט עובד"})]})]}),v.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg text-xs text-gray-600",children:v.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[v.jsxs("div",{children:["דפדפן: ",navigator.userAgent.split(" ").pop()]}),v.jsxs("div",{children:["URL: ",window.location.href]}),v.jsxs("div",{children:["זמן: ",(new Date).toLocaleString("he-IL")]}),v.jsx("div",{children:"גרסה: KR-STUDIO v2.0"})]})})]})]})}):this.props.children}}function T(){const[e,r]=l.useState("dashboard"),[t,n]=l.useState(!0),[o,s]=l.useState(null),[i,c]=l.useState(new Map);l.useEffect(()=>{try{N.initialize(),console.log("✅ KR-STUDIO App initialized with SafetyGuards")}catch(e){console.error("❌ Failed to initialize SafetyGuards:",e)}},[]);const d=e=>a(this,null,function*(){try{if(i.has(e))return i.get(e);let r;switch(e){case"dashboard":default:r=(yield E(()=>import("./Dashboard-764e95fd.js"),["assets/Dashboard-764e95fd.js","assets/vendor-ed70b211.js","assets/button-04768ca5.js","assets/card-5a73608a.js","assets/translations-0a067c83.js","assets/icons-3130b023.js"])).default;break;case"audio-separation":r=(yield E(()=>import("./AudioSeparation-8d7d6840.js"),["assets/AudioSeparation-8d7d6840.js","assets/vendor-ed70b211.js","assets/icons-3130b023.js"])).default;break;case"productionRecommendations":r=(yield E(()=>import("./ProductionRecommendations-e72b0ed3.js"),["assets/ProductionRecommendations-e72b0ed3.js","assets/vendor-ed70b211.js","assets/card-5a73608a.js","assets/button-04768ca5.js","assets/register_all_kernels-6e0b897e.js","assets/icons-3130b023.js"])).default;break;case"sketches":r=(yield E(()=>import("./SketchCreation-9d0ac412.js"),["assets/SketchCreation-9d0ac412.js","assets/vendor-ed70b211.js","assets/button-04768ca5.js","assets/card-5a73608a.js","assets/select-bbbbcd99.js","assets/icons-3130b023.js","assets/translations-0a067c83.js"])).default;break;case"export":r=(yield E(()=>import("./ExportVersions-bf7c06e5.js"),["assets/ExportVersions-bf7c06e5.js","assets/vendor-ed70b211.js","assets/card-5a73608a.js","assets/icons-3130b023.js"])).default;break;case"credits":r=(yield E(()=>import("./CreditsContracts-f6ee2d31.js"),["assets/CreditsContracts-f6ee2d31.js","assets/vendor-ed70b211.js","assets/card-5a73608a.js","assets/translations-0a067c83.js","assets/icons-3130b023.js"])).default;break;case"sessions":r=(yield E(()=>import("./SessionManagement-3331742c.js"),["assets/SessionManagement-3331742c.js","assets/vendor-ed70b211.js","assets/card-5a73608a.js","assets/translations-0a067c83.js","assets/icons-3130b023.js"])).default;break;case"verification":r=(yield E(()=>import("./UserVerification-c7b3dc8d.js"),["assets/UserVerification-c7b3dc8d.js","assets/vendor-ed70b211.js","assets/button-04768ca5.js","assets/card-5a73608a.js","assets/select-bbbbcd99.js","assets/icons-3130b023.js","assets/translations-0a067c83.js"])).default;break;case"advancedCodeManager":r=(yield E(()=>import("./AdvancedCodeManager-ae3073c2.js"),["assets/AdvancedCodeManager-ae3073c2.js","assets/vendor-ed70b211.js"])).default;break;case"statistics-display":r=(yield E(()=>import("./StatisticsDisplay-b60411b1.js"),["assets/StatisticsDisplay-b60411b1.js","assets/vendor-ed70b211.js","assets/icons-3130b023.js"])).default;break;case"performance-monitor":r=(yield E(()=>import("./PerformanceMonitor-86a8acb4.js"),["assets/PerformanceMonitor-86a8acb4.js","assets/vendor-ed70b211.js","assets/icons-3130b023.js"])).default;break;case"waveform-visualizer":r=(yield E(()=>import("./WaveformVisualizer-ca4f2956.js"),["assets/WaveformVisualizer-ca4f2956.js","assets/vendor-ed70b211.js"])).default}return c(t=>new Map(t).set(e,r)),r}catch(r){console.error(`Failed to load component ${e}:`,r),s(`שגיאה בטעינת ${e}`);return(yield E(()=>import("./Dashboard-764e95fd.js"),["assets/Dashboard-764e95fd.js","assets/vendor-ed70b211.js","assets/button-04768ca5.js","assets/card-5a73608a.js","assets/translations-0a067c83.js","assets/icons-3130b023.js"])).default}}),h=({componentName:e,fallback:t=null})=>{const[n,o]=l.useState(null),[s,i]=l.useState(!0),[c,h]=l.useState(null);return l.useEffect(()=>{(()=>{a(this,null,function*(){try{i(!0),h(null);const r=yield d(e);o(()=>r)}catch(r){console.error(`Error loading ${e}:`,r),h(r.message)}finally{i(!1)}})})()},[e]),s?t||v.jsx(I,{}):c?v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"text-center",children:[v.jsx(_,{name:"alert",className:"w-16 h-16 text-red-500 mx-auto mb-4"}),v.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"שגיאה בטעינה"}),v.jsx("p",{className:"text-gray-600 mb-4",children:c}),v.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg",children:"נסה שוב"})]})}):n?v.jsx(n,{onPageChange:r}):t||v.jsx(I,{})};if(l.useEffect(()=>{(()=>{a(this,null,function*(){try{yield d("dashboard"),n(!1)}catch(e){console.error("Failed to initialize app:",e),s(e.message),n(!1)}})})()},[]),o)return v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"text-center",children:[v.jsx(_,{name:"alert",className:"w-16 h-16 text-red-500 mx-auto mb-4"}),v.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"שגיאה באתחול"}),v.jsx("p",{className:"text-gray-600 mb-4",children:o}),v.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg",children:"נסה שוב"})]})});if(t)return v.jsx(I,{});return v.jsx(R,{children:v.jsx("div",{className:"App",children:v.jsx(h,{componentName:e,fallback:v.jsx(I,{})})})})}try{N.initialize(),console.log("✅ SafetyGuards initialized in main.jsx")}catch(L){console.error("❌ Failed to initialize SafetyGuards in main.jsx:",L)}window.addEventListener("error",e=>{var r,t;console.error("🚨 Global error caught in main.jsx:",e.error),N.handleError("Global Error",{message:(null==(r=e.error)?void 0:r.message)||"Unknown error",stack:(null==(t=e.error)?void 0:t.stack)||"No stack trace",filename:e.filename,lineno:e.lineno,colno:e.colno})}),window.addEventListener("unhandledrejection",e=>{var r,t;console.error("🚨 Unhandled promise rejection in main.jsx:",e.reason),N.handleError("Unhandled Promise Rejection",{message:(null==(r=e.reason)?void 0:r.message)||"Unknown promise rejection",stack:(null==(t=e.reason)?void 0:t.stack)||"No stack trace"}),e.preventDefault()});const D=console.error;console.error=(...e)=>{D.apply(console,e);const r=e.join(" ");(r.includes("React")||r.includes("Warning"))&&N.handleError("React Error",{message:r,args:e})};const O=()=>{try{w.createRoot(document.getElementById("root")).render(v.jsx(d.StrictMode,{children:v.jsx(T,{})})),console.log("✅ KR-STUDIO App rendered successfully")}catch(L){console.error("❌ Failed to render app:",L);const r=document.getElementById("root");r&&(r.innerHTML=`\n        <div style="\n          min-height: 100vh;\n          background: linear-gradient(135deg, #fef2f2 0%, #ffffff 50%, #fef2f2 100%);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-family: system-ui, -apple-system, sans-serif;\n          padding: 20px;\n        ">\n          <div style="\n            max-width: 500px;\n            background: white;\n            padding: 40px;\n            border-radius: 16px;\n            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);\n            text-align: center;\n            border: 1px solid #fecaca;\n          ">\n            <div style="\n              background: #fef2f2;\n              width: 80px;\n              height: 80px;\n              border-radius: 50%;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              margin: 0 auto 20px;\n              font-size: 40px;\n            ">⚠️</div>\n            \n            <h1 style="\n              color: #dc2626;\n              font-size: 24px;\n              font-weight: bold;\n              margin-bottom: 16px;\n            ">שגיאה בטעינת האפליקציה</h1>\n            \n            <p style="\n              color: #6b7280;\n              margin-bottom: 24px;\n              line-height: 1.5;\n            ">\n              KR-STUDIO נתקל בבעיה בטעינה. אנא רענן את הדף או פנה לתמיכה.\n            </p>\n            \n            <div style="\n              background: #f3f4f6;\n              padding: 16px;\n              border-radius: 8px;\n              margin-bottom: 24px;\n              text-align: left;\n              font-family: monospace;\n              font-size: 12px;\n              color: #374151;\n              max-height: 200px;\n              overflow-y: auto;\n            ">\n              <strong>Error Details:</strong><br>\n              ${L.message}<br><br>\n              <strong>Stack:</strong><br>\n              ${L.stack||"No stack trace available"}\n            </div>\n            \n            <button onclick="window.location.reload()" style="\n              background: #dc2626;\n              color: white;\n              border: none;\n              padding: 12px 24px;\n              border-radius: 8px;\n              font-weight: 500;\n              cursor: pointer;\n              transition: background-color 0.2s;\n            " onmouseover="this.style.background='#b91c1c'" onmouseout="this.style.background='#dc2626'">\n              רענן דף\n            </button>\n          </div>\n        </div>\n      `)}};try{O()}catch(L){console.error("❌ Critical error during app initialization:",L),setTimeout(()=>{try{O()}catch(e){console.error("❌ Failed to render app on retry:",e);const r=document.getElementById("root");r&&(r.innerHTML='\n          <div style="\n            min-height: 100vh;\n            background: #dc2626;\n            color: white;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-family: system-ui, -apple-system, sans-serif;\n            padding: 20px;\n            text-align: center;\n          ">\n            <div>\n              <h1 style="font-size: 32px; margin-bottom: 16px;">🚨 שגיאה קריטית</h1>\n              <p style="font-size: 18px; margin-bottom: 24px;">\n                KR-STUDIO לא יכול לטעון. אנא פנה לתמיכה טכנית.\n              </p>\n              <button onclick="window.location.reload()" style="\n                background: white;\n                color: #dc2626;\n                border: none;\n                padding: 12px 24px;\n                border-radius: 8px;\n                font-weight: bold;\n                cursor: pointer;\n              ">\n                נסה שוב\n              </button>\n            </div>\n          </div>\n        ')}},2e3)}export{E as _,v as j};
//# sourceMappingURL=index-2831a802.js.map
