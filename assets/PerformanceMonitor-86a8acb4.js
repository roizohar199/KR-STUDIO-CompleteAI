var e=Object.defineProperty,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(s,t,o)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,r=(e,r)=>{for(var l in r||(r={}))t.call(r,l)&&n(e,l,r[l]);if(s)for(var l of s(r))o.call(r,l)&&n(e,l,r[l]);return e},l=(e,s,t)=>new Promise((o,n)=>{var r=e=>{try{i(t.next(e))}catch(s){n(s)}},l=e=>{try{i(t.throw(e))}catch(s){n(s)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(r,l);i((t=t.apply(e,s)).next())});import{_ as i,j as a}from"./index-2831a802.js";import{r as d}from"./vendor-ed70b211.js";import{Activity as c,LucideZap as h,Database as u,Cpu as m,HardDrive as f}from"./icons-3130b023.js";const g=new class{constructor(){this.loadedModules=new Map,this.loadingPromises=new Map}loadTensorFlow(){return l(this,null,function*(){if(this.loadedModules.has("tensorflow"))return this.loadedModules.get("tensorflow");if(this.loadingPromises.has("tensorflow"))return this.loadingPromises.get("tensorflow");const e=(()=>l(this,null,function*(){try{console.log("🧠 מנסה לטעון TensorFlow.js...");const e=yield i(()=>import("./index-295bde5e.js"),["assets/index-295bde5e.js","assets/register_all_kernels-6e0b897e.js","assets/vendor-ed70b211.js"]);return yield e.setBackend("webgl"),yield e.ready(),console.log("✅ TensorFlow.js נטען בהצלחה"),this.loadedModules.set("tensorflow",e),this.loadingPromises.delete("tensorflow"),e}catch(e){console.warn("⚠️ שגיאה בטעינת TensorFlow.js, יוצר מודל סימולציה:",e);const s={sequential:()=>({add:function(e){return this.layers=this.layers||[],this.layers.push(e),this},compile:function(e){return this.compiled=!0,this},predict:function(e){return l(this,null,function*(){return{array:()=>l(this,null,function*(){return[[Math.random(),Math.random(),Math.random()]]})}})},fit:function(e,s,t){return l(this,null,function*(){return{history:{loss:[.5,.3,.2,.1]}}})}}),layers:{dense:e=>r({type:"dense"},e),dropout:e=>r({type:"dropout"},e),conv1d:e=>r({type:"conv1d"},e),maxPooling1d:e=>r({type:"maxPooling1d"},e),globalAveragePooling1d:()=>({type:"globalAveragePooling1d"})},train:{adam:e=>({type:"adam",learningRate:e})},tensor:e=>({array:()=>l(this,null,function*(){return e}),reshape:function(e){return this},expandDims:function(e){return this}}),tensor2d:e=>({array:()=>l(this,null,function*(){return e}),reshape:function(e){return this}}),setBackend:e=>l(this,null,function*(){return console.log(`Backend set to: ${e}`)}),ready:()=>l(this,null,function*(){return console.log("TensorFlow ready")}),dispose:()=>console.log("TensorFlow disposed")};return this.loadedModules.set("tensorflow",s),this.loadingPromises.delete("tensorflow"),console.log("✅ מודל סימולציה של TensorFlow.js נוצר בהצלחה"),s}}))();return this.loadingPromises.set("tensorflow",e),e})}loadJSPDF(){return l(this,null,function*(){if(this.loadedModules.has("jspdf"))return this.loadedModules.get("jspdf");if(this.loadingPromises.has("jspdf"))return this.loadingPromises.get("jspdf");const e=i(()=>import("./jspdf.es.min-e013da25.js").then(e=>e.j),["assets/jspdf.es.min-e013da25.js","assets/index-2831a802.js","assets/vendor-ed70b211.js","assets/index-baf772f0.css"]).then(({default:e})=>(this.loadedModules.set("jspdf",e),this.loadingPromises.delete("jspdf"),console.log("✅ jsPDF נטען דינמית בהצלחה"),e)).catch(e=>{throw console.error("❌ שגיאה בטעינת jsPDF:",e),this.loadingPromises.delete("jspdf"),e});return this.loadingPromises.set("jspdf",e),e})}loadHtml2Canvas(){return l(this,null,function*(){if(this.loadedModules.has("html2canvas"))return this.loadedModules.get("html2canvas");if(this.loadingPromises.has("html2canvas"))return this.loadingPromises.get("html2canvas");const e=i(()=>import("./html2canvas.esm-4387b682.js"),[]).then(({default:e})=>(this.loadedModules.set("html2canvas",e),this.loadingPromises.delete("html2canvas"),console.log("✅ html2canvas נטען דינמית בהצלחה"),e)).catch(e=>{throw console.error("❌ שגיאה בטעינת html2canvas:",e),this.loadingPromises.delete("html2canvas"),e});return this.loadingPromises.set("html2canvas",e),e})}loadComponent(e){return l(this,null,function*(){const s={ProductionRecommendations:()=>i(()=>import("./ProductionRecommendations-e72b0ed3.js"),["assets/ProductionRecommendations-e72b0ed3.js","assets/index-2831a802.js","assets/vendor-ed70b211.js","assets/index-baf772f0.css","assets/card-5a73608a.js","assets/button-04768ca5.js","assets/register_all_kernels-6e0b897e.js","assets/icons-3130b023.js"]),ExportVersions:()=>i(()=>import("./ExportVersions-bf7c06e5.js"),["assets/ExportVersions-bf7c06e5.js","assets/index-2831a802.js","assets/vendor-ed70b211.js","assets/index-baf772f0.css","assets/card-5a73608a.js","assets/icons-3130b023.js"]),SketchCreation:()=>i(()=>import("./SketchCreation-9d0ac412.js"),["assets/SketchCreation-9d0ac412.js","assets/index-2831a802.js","assets/vendor-ed70b211.js","assets/index-baf772f0.css","assets/button-04768ca5.js","assets/card-5a73608a.js","assets/select-bbbbcd99.js","assets/icons-3130b023.js","assets/translations-0a067c83.js"]),SessionManagement:()=>i(()=>import("./SessionManagement-3331742c.js"),["assets/SessionManagement-3331742c.js","assets/index-2831a802.js","assets/vendor-ed70b211.js","assets/index-baf772f0.css","assets/card-5a73608a.js","assets/translations-0a067c83.js","assets/icons-3130b023.js"]),CreditsContracts:()=>i(()=>import("./CreditsContracts-f6ee2d31.js"),["assets/CreditsContracts-f6ee2d31.js","assets/index-2831a802.js","assets/vendor-ed70b211.js","assets/index-baf772f0.css","assets/card-5a73608a.js","assets/translations-0a067c83.js","assets/icons-3130b023.js"]),UserVerification:()=>i(()=>import("./UserVerification-c7b3dc8d.js"),["assets/UserVerification-c7b3dc8d.js","assets/index-2831a802.js","assets/vendor-ed70b211.js","assets/index-baf772f0.css","assets/button-04768ca5.js","assets/card-5a73608a.js","assets/select-bbbbcd99.js","assets/icons-3130b023.js","assets/translations-0a067c83.js"]),AudioSeparation:()=>i(()=>import("./AudioSeparation-8d7d6840.js"),["assets/AudioSeparation-8d7d6840.js","assets/index-2831a802.js","assets/vendor-ed70b211.js","assets/index-baf772f0.css","assets/icons-3130b023.js"])};if(!s[e])throw new Error(`רכיב ${e} לא נמצא`);if(this.loadedModules.has(e))return console.log(`📦 רכיב ${e} כבר נטען, משתמש בגרסה קיימת`),this.loadedModules.get(e);if(this.loadingPromises.has(e))return console.log(`⏳ רכיב ${e} כבר בטעינה, ממתין...`),this.loadingPromises.get(e);console.log(`🚀 מתחיל טעינת רכיב: ${e}`);const t=s[e]().then(s=>{const t=s.default;if(!t)throw new Error(`רכיב ${e} לא יוצא נכון`);return this.loadedModules.set(e,t),this.loadingPromises.delete(e),console.log(`✅ רכיב ${e} נטען דינמית בהצלחה`),t}).catch(s=>{throw console.error(`❌ שגיאה בטעינת רכיב ${e}:`,s),this.loadingPromises.delete(e),s});return this.loadingPromises.set(e,t),t})}cleanup(){this.loadedModules.clear(),this.loadingPromises.clear(),console.log("🧹 ניקוי מודולים דינמיים הושלם")}getLoadingStats(){return{loadedModules:Array.from(this.loadedModules.keys()),loadingModules:Array.from(this.loadingPromises.keys()),totalLoaded:this.loadedModules.size,totalLoading:this.loadingPromises.size}}initializeAllLibraries(){return l(this,null,function*(){console.log("🚀 מתחיל טעינה בטוחה של כל הספריות...");const e={tensorflow:!1,jspdf:!1,html2canvas:!1};try{try{yield this.loadTensorFlow(),e.tensorflow=!0,console.log("✅ TensorFlow.js נטען בהצלחה")}catch(s){console.warn("⚠️ TensorFlow.js לא נטען, משתמש במודל סימולציה"),e.tensorflow=!1}try{yield this.loadJSPDF(),e.jspdf=!0,console.log("✅ jsPDF נטען בהצלחה")}catch(s){console.warn("⚠️ jsPDF לא נטען"),e.jspdf=!1}try{yield this.loadHtml2Canvas(),e.html2canvas=!0,console.log("✅ html2canvas נטען בהצלחה")}catch(s){console.warn("⚠️ html2canvas לא נטען"),e.html2canvas=!1}return console.log("📊 סיכום טעינת ספריות:",e),e}catch(s){return console.error("❌ שגיאה בטעינת ספריות:",s),e}})}},p=()=>{const[e,s]=d.useState({memory:0,cpu:0,loadedModules:0,loadingModules:0,totalChunks:0}),[t,o]=d.useState(!1);d.useEffect(()=>{const e=setInterval(()=>{if("memory"in performance){const e=performance.memory,t=e.usedJSHeapSize/e.jsHeapSizeLimit*100,o=performance.now(),n=performance.now()-o,r=g.getLoadingStats();s({memory:Math.round(t),cpu:Math.round(n),loadedModules:r.totalLoaded,loadingModules:r.totalLoading,totalChunks:r.loadedModules.length+r.loadingModules.length})}},2e3);return()=>clearInterval(e)},[]);return t?a.jsxs("div",{className:"fixed bottom-4 right-4 bg-gray-900 border border-gray-700 rounded-lg p-4 shadow-xl z-50 min-w-64",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-white font-semibold flex items-center",children:[a.jsx(h,{size:16,className:"mr-2"}),"ניטור ביצועים"]}),a.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-300",children:[a.jsx(u,{size:14,className:"mr-2"}),"זיכרון"]}),a.jsxs("div",{className:"font-mono "+(n=e.memory,n<50?"text-green-500":n<80?"text-yellow-500":"text-red-500"),children:[e.memory,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-300",children:[a.jsx(m,{size:14,className:"mr-2"}),"CPU"]}),a.jsxs("div",{className:`font-mono ${(e=>e<10?"text-green-500":e<50?"text-yellow-500":"text-red-500")(e.cpu)}`,children:[e.cpu,"ms"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-300",children:[a.jsx(f,{size:14,className:"mr-2"}),"מודולים"]}),a.jsxs("div",{className:"text-blue-400 font-mono",children:[e.loadedModules,"/",e.totalChunks]})]}),a.jsx("div",{className:"pt-2 border-t border-gray-700",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>g.cleanup(),className:"flex-1 bg-red-600 hover:bg-red-700 text-white text-xs py-1 px-2 rounded",title:"ניקוי זיכרון",children:"ניקוי"}),a.jsx("button",{onClick:()=>{g.cleanup(),setTimeout(()=>{window.location.reload()},100)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-xs py-1 px-2 rounded",title:"רענון",children:"רענון"})]})})]})]}):a.jsx("button",{onClick:()=>o(!0),className:"fixed bottom-4 right-4 bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full shadow-lg z-50",title:"ניטור ביצועים",children:a.jsx(c,{size:20})});var n};export{p as default};
//# sourceMappingURL=PerformanceMonitor-86a8acb4.js.map
