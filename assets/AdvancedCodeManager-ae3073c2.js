var e=(e,t,s)=>new Promise((i,n)=>{var r=e=>{try{a(s.next(e))}catch(t){n(t)}},o=e=>{try{a(s.throw(e))}catch(t){n(t)}},a=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,o);a((s=s.apply(e,t)).next())});import{j as t}from"./index-2831a802.js";import{r as s}from"./vendor-ed70b211.js";const i=new class{constructor(){this.issues=[],this.metrics={},this.recommendations=[],this.analysisHistory=[]}analyzeCode(t,s){return e(this,null,function*(){console.log("🔍 מתחיל ניתוח קוד מתקדם...");const e={filePath:s,timestamp:(new Date).toISOString(),issues:[],metrics:{},recommendations:[],complexity:0,maintainability:0,performance:0,security:0};try{return e.complexity=this.analyzeComplexity(t),e.performance=this.analyzePerformance(t),e.security=this.analyzeSecurity(t),e.maintainability=this.analyzeMaintainability(t),e.issues=this.identifyIssues(t),e.recommendations=this.generateRecommendations(e),e.overallScore=this.calculateOverallScore(e),this.analysisHistory.push(e),console.log("✅ ניתוח קוד הושלם בהצלחה"),e}catch(i){throw console.error("❌ שגיאה בניתוח קוד:",i),i}})}analyzeComplexity(e){const t={cyclomaticComplexity:0,nestingDepth:0,functionLength:0,parameterCount:0,returnStatements:0};try{t.cyclomaticComplexity=this.calculateCyclomaticComplexity(e),t.nestingDepth=this.calculateNestingDepth(e),t.functionLength=this.calculateFunctionLength(e),t.parameterCount=this.calculateParameterCount(e),t.returnStatements=this.calculateReturnStatements(e)}catch(s){console.warn("אזהרה בניתוח מורכבות:",s)}return t}analyzePerformance(e){const t={memoryUsage:0,timeComplexity:0,inefficientPatterns:0,optimizationOpportunities:0};try{t.inefficientPatterns=this.identifyInefficientPatterns(e),t.optimizationOpportunities=this.identifyOptimizationOpportunities(e),t.timeComplexity=this.estimateTimeComplexity(e),t.memoryUsage=this.estimateMemoryUsage(e)}catch(s){console.warn("אזהרה בניתוח ביצועים:",s)}return t}analyzeSecurity(e){const t={vulnerabilities:0,securityScore:0,riskLevel:"LOW",recommendations:[]};try{t.vulnerabilities=this.identifySecurityVulnerabilities(e),t.securityScore=this.calculateSecurityScore(e),t.riskLevel=this.assessRiskLevel(t.securityScore),t.recommendations=this.generateSecurityRecommendations(e)}catch(s){console.warn("אזהרה בניתוח אבטחה:",s)}return t}analyzeMaintainability(e){const t={readability:0,modularity:0,documentation:0,testCoverage:0,technicalDebt:0};try{t.readability=this.assessReadability(e),t.modularity=this.assessModularity(e),t.documentation=this.assessDocumentation(e),t.testCoverage=this.assessTestCoverage(e),t.technicalDebt=this.calculateTechnicalDebt(e)}catch(s){console.warn("אזהרה בניתוח תחזוקתיות:",s)}return t}identifyIssues(e){const t=[];try{const s=this.identifyCommonIssues(e);t.push(...s);const i=this.identifyAntiPatterns(e);t.push(...i);const n=this.identifyPerformanceIssues(e);t.push(...n);const r=this.identifySecurityIssues(e);t.push(...r)}catch(s){console.warn("אזהרה בזיהוי בעיות:",s)}return t}generateRecommendations(e){const t=[];try{e.complexity.cyclomaticComplexity>10&&t.push({type:"COMPLEXITY",priority:"HIGH",message:"המורכבות הציקלומטית גבוהה מדי. שקול לפצל את הפונקציה",suggestion:"פיצול פונקציה לפונקציות קטנות יותר"}),e.performance.inefficientPatterns>5&&t.push({type:"PERFORMANCE",priority:"MEDIUM",message:"זוהו דפוסים לא יעילים בקוד",suggestion:"שימוש באלגוריתמים יעילים יותר"}),e.security.vulnerabilities>0&&t.push({type:"SECURITY",priority:"CRITICAL",message:"זוהו פגיעויות אבטחה בקוד",suggestion:"טיפול מיידי בפגיעויות האבטחה"}),e.maintainability.technicalDebt>50&&t.push({type:"MAINTAINABILITY",priority:"MEDIUM",message:"רמת החוב הטכני גבוהה",suggestion:"השקעה בשיפור הקוד הקיים"})}catch(s){console.warn("אזהרה ביצירת המלצות:",s)}return t}calculateOverallScore(e){try{const t={complexity:.25,performance:.25,security:.25,maintainability:.25},s={complexity:Math.max(0,100-5*e.complexity.cyclomaticComplexity),performance:Math.max(0,100-10*e.performance.inefficientPatterns),security:Math.max(0,100-20*e.security.vulnerabilities),maintainability:Math.max(0,100-.5*e.maintainability.technicalDebt)},i=Object.keys(t).reduce((e,i)=>e+s[i]*t[i],0);return Math.round(i)}catch(t){return console.warn("אזהרה בחישוב ציון כללי:",t),50}}calculateCyclomaticComplexity(e){return(e.match(/if|else|for|while|case|catch|&&|\|\|/g)||[]).length+1}calculateNestingDepth(e){const t=e.split("\n");let s=0,i=0;for(const n of t)n.includes("{")&&i++,n.includes("}")&&i--,s=Math.max(s,i);return s}calculateFunctionLength(e){const t=e.match(/function\s+\w+\s*\([^)]*\)\s*\{[^}]*\}/g)||[];if(0===t.length)return 0;const s=t.reduce((e,t)=>e+t.split("\n").length,0);return Math.round(s/t.length)}calculateParameterCount(e){const t=e.match(/function\s+\w+\s*\([^)]*\)/g)||[];if(0===t.length)return 0;const s=t.reduce((e,t)=>{const s=t.match(/\(([^)]*)\)/);return s&&s[1].trim()?e+s[1].split(",").length:e},0);return Math.round(s/t.length)}calculateReturnStatements(e){return(e.match(/return\s+/g)||[]).length}identifyInefficientPatterns(e){let t=0;return e.includes("for (let i = 0; i < array.length; i++)")&&t++,e.includes("new Object()")&&t++,e.includes('str += "text"')&&t++,t}identifyOptimizationOpportunities(e){let t=0;return e.includes("document.getElementById")&&e.includes("document.getElementById")&&t++,e.includes("import(")&&e.includes("import(")&&t++,t}estimateTimeComplexity(e){return e.includes("nested for loops")?"O(n²)":e.includes("for loop")?"O(n)":e.includes("recursion")?"O(2^n)":"O(1)"}estimateMemoryUsage(e){let t=0;return e.includes("Array")&&(t+=10),e.includes("Object")&&(t+=5),e.includes("Map")&&(t+=8),e.includes("Set")&&(t+=8),t}identifySecurityVulnerabilities(e){let t=0;return(e.includes("innerHTML")||e.includes("eval("))&&t++,(e.includes("document.write")||e.includes("innerHTML"))&&t++,e.includes("XMLHttpRequest")&&!e.includes("CSRF")&&t++,t}calculateSecurityScore(e){const t=this.identifySecurityVulnerabilities(e);return Math.max(0,100-25*t)}assessRiskLevel(e){return e>=80?"LOW":e>=60?"MEDIUM":e>=40?"HIGH":"CRITICAL"}generateSecurityRecommendations(e){const t=[];return e.includes("innerHTML")&&t.push("החלף innerHTML ב-textContent למניעת XSS"),e.includes("eval(")&&t.push("החלף eval() בפונקציות בטוחות יותר"),t}assessReadability(e){let t=100;return e.includes("var x = 1; var y = 2; var z = 3;")&&(t-=20),e.includes("function a(){if(b){if(c){if(d){return e;}}}}")&&(t-=30),Math.max(0,t)}assessModularity(e){let t=100;const s=e.match(/function\s+\w+/g)||[];return s.length<2&&(t-=20),s.length>10&&(t-=10),Math.max(0,t)}assessDocumentation(e){let t=100;return e.includes("/**")||e.includes("//")||(t-=40),e.includes("@param")||e.includes("@return")||(t-=20),Math.max(0,t)}assessTestCoverage(e){return 50}calculateTechnicalDebt(e){let t=0;return e.includes("TODO")&&(t+=10),e.includes("FIXME")&&(t+=20),e.includes("HACK")&&(t+=30),e.includes("// temporary")&&(t+=15),t}identifyCommonIssues(e){const t=[];return e.includes("console.log(")&&t.push({type:"COMMON",severity:"LOW",message:"console.log נשאר בקוד ייצור",line:this.findLineNumber(e,"console.log(")}),e.includes("debugger;")&&t.push({type:"COMMON",severity:"MEDIUM",message:"debugger statement נשאר בקוד",line:this.findLineNumber(e,"debugger;")}),t}identifyAntiPatterns(e){const t=[];return e.includes("new Array()")&&t.push({type:"ANTI_PATTERN",severity:"MEDIUM",message:"שימוש ב-new Array() במקום []",line:this.findLineNumber(e,"new Array()")}),t}identifyPerformanceIssues(e){const t=[];return e.includes("innerHTML")&&e.includes("for")&&t.push({type:"PERFORMANCE",severity:"HIGH",message:"שימוש ב-innerHTML בלולאה עלול לגרום לבעיות ביצועים",line:this.findLineNumber(e,"innerHTML")}),t}identifySecurityIssues(e){const t=[];return e.includes("eval(")&&t.push({type:"SECURITY",severity:"CRITICAL",message:"שימוש ב-eval() עלול לגרום לפגיעויות אבטחה",line:this.findLineNumber(e,"eval(")}),t}findLineNumber(e,t){const s=e.split("\n");for(let i=0;i<s.length;i++)if(s[i].includes(t))return i+1;return 0}getAnalysisStats(){return{totalAnalyses:this.analysisHistory.length,averageScore:this.calculateAverageScore(),issuesByType:this.groupIssuesByType(),recommendationsByPriority:this.groupRecommendationsByPriority()}}calculateAverageScore(){if(0===this.analysisHistory.length)return 0;const e=this.analysisHistory.reduce((e,t)=>e+(t.overallScore||0),0);return Math.round(e/this.analysisHistory.length)}groupIssuesByType(){const e={};return this.analysisHistory.forEach(t=>{t.issues.forEach(t=>{e[t.type]||(e[t.type]=0),e[t.type]++})}),e}groupRecommendationsByPriority(){const e={CRITICAL:0,HIGH:0,MEDIUM:0,LOW:0};return this.analysisHistory.forEach(t=>{t.recommendations.forEach(t=>{e[t.priority]&&e[t.priority]++})}),e}clearHistory(){this.analysisHistory=[],console.log("🧹 היסטוריית ניתוח נוקתה")}exportAnalysis(){return{stats:this.getAnalysisStats(),history:this.analysisHistory,timestamp:(new Date).toISOString()}}};const n=new class{constructor(){this.optimizations=new Map,this.performanceMetrics=new Map,this.optimizationHistory=[],this.isEnabled=!0}optimizeCode(t){return e(this,arguments,function*(e,t={}){if(!this.isEnabled)return e;console.log("🚀 מתחיל אופטימיזציה חכמה...");const s=e,i=[];try{return this.shouldOptimizeLoops(e)&&(e=this.optimizeLoops(e),i.push("LOOP_OPTIMIZATION")),this.shouldOptimizeMemory(e)&&(e=this.optimizeMemory(e),i.push("MEMORY_OPTIMIZATION")),this.shouldOptimizeDOM(e)&&(e=this.optimizeDOM(e),i.push("DOM_OPTIMIZATION")),this.shouldOptimizeAlgorithms(e)&&(e=this.optimizeAlgorithms(e),i.push("ALGORITHM_OPTIMIZATION")),this.shouldOptimizeAsync(e)&&(e=this.optimizeAsync(e),i.push("ASYNC_OPTIMIZATION")),this.saveOptimizationHistory(s,e,i,t),console.log("✅ אופטימיזציה חכמה הושלמה בהצלחה"),e}catch(n){return console.error("❌ שגיאה באופטימיזציה:",n),s}})}shouldOptimizeLoops(e){return e.includes("for (")||e.includes("while (")||e.includes("forEach(")}optimizeLoops(e){let t=e;return t=this.optimizeForLoops(t),t=this.optimizeWhileLoops(t),t=this.optimizeForEach(t),t}optimizeForLoops(e){return e=(e=e.replace(/for\s*\(\s*let\s+i\s*=\s*0\s*;\s*i\s*<\s*(\w+)\.length\s*;\s*i\+\+\)/g,"for (let i = 0, len = $1.length; i < len; i++)")).replace(/for\s*\(\s*let\s+i\s*=\s*0\s*;\s*i\s*<\s*(\w+)\.length\s*;\s*i\+\+\)/g,"const len = $1.length;\nfor (let i = 0; i < len; i++)")}optimizeWhileLoops(e){return e=e.replace(/while\s*\(\s*true\s*\)/g,"let maxIterations = 1000;\nlet iterationCount = 0;\nwhile (iterationCount < maxIterations)")}optimizeForEach(e){return e=e.replace(/(\w+)\.forEach\s*\(\s*\([^)]*\)\s*=>\s*\{([^}]*)\}\s*\)/g,"for (let i = 0, len = $1.length; i < len; i++) {\n  const item = $1[i];\n  $2\n}")}shouldOptimizeMemory(e){return e.includes("new Array(")||e.includes("new Object(")||e.includes("+= ")}optimizeMemory(e){let t=e;return t=t.replace(/new Array\(\)/g,"[]"),t=t.replace(/new Object\(\)/g,"{}"),t=this.optimizeStringConcatenation(t),t=this.optimizeWeakReferences(t),t}optimizeStringConcatenation(e){const t=/(\w+)\s*\+=\s*["'][^"']*["']/g;let s,i=e;for(;null!==(s=t.exec(e));){const e=s[1],t=`// אופטימיזציה: שימוש ב-array.join במקום +=\nconst ${e}Parts = [${e}];\n// הוסף מחרוזות ל-array במקום +=\n// ${e}Parts.push("text");\n${e} = ${e}Parts.join('');`;i=i.replace(s[0],t)}return i}optimizeWeakReferences(e){return e.includes("new Map()")&&e.includes("set(")&&e.includes("delete(")&&(e=(e=e.replace(/new Map\(\)/g,"new WeakMap()")).replace(/Map/g,"WeakMap")),e.includes("new Set()")&&e.includes("add(")&&e.includes("delete(")&&(e=(e=e.replace(/new Set\(\)/g,"new WeakSet()")).replace(/Set/g,"WeakSet")),e}shouldOptimizeDOM(e){return e.includes("document.")||e.includes("getElementById")||e.includes("querySelector")}optimizeDOM(e){let t=e;return t=this.optimizeDOMCaching(t),t=this.optimizeBatchUpdates(t),t=this.optimizeDocumentFragment(t),t}optimizeDOMCaching(e){const t=e.match(/document\.(getElementById|querySelector|querySelectorAll)\([^)]+\)/g)||[],s=[...new Set(t)];if(s.length>0){const t=`// אופטימיזציה: caching של DOM elements\nconst domCache = {\n${s.map(e=>`  ${e.replace(/[^a-zA-Z0-9]/g,"_")}: ${e},`).join("\n")}\n};`;e=t+"\n"+e,s.forEach(t=>{const s=t.replace(/[^a-zA-Z0-9]/g,"_");e=e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),`domCache.${s}`)})}return e}optimizeBatchUpdates(e){if(e.includes("style.")&&e.includes("textContent")){e="// אופטימיזציה: batch DOM updates\nconst batchUpdate = (element, updates) => {\n  const originalDisplay = element.style.display;\n  element.style.display = 'none';\n  \n  Object.entries(updates).forEach(([property, value]) => {\n    if (property === 'textContent') {\n      element.textContent = value;\n    } else if (property.startsWith('style.')) {\n      const styleProp = property.replace('style.', '');\n      element.style[styleProp] = value;\n    }\n  });\n  \n  element.style.display = originalDisplay;\n};"+"\n"+e}return e}optimizeDocumentFragment(e){if(e.includes("createElement")&&e.includes("appendChild")){e="// אופטימיזציה: שימוש ב-DocumentFragment\nconst createElementsBatch = (elementsData) => {\n  const fragment = document.createDocumentFragment();\n  \n  elementsData.forEach(data => {\n    const element = document.createElement(data.tag);\n    Object.assign(element, data.attributes);\n    if (data.textContent) element.textContent = data.textContent;\n    fragment.appendChild(element);\n  });\n  \n  return fragment;\n};"+"\n"+e}return e}shouldOptimizeAlgorithms(e){return e.includes("sort(")||e.includes("filter(")||e.includes("map(")}optimizeAlgorithms(e){let t=e;return t=t.replace(/\.includes\(/g,".indexOf("),t=this.optimizeArrayIncludes(t),t=this.optimizeObjectLookup(t),t}optimizeArrayIncludes(e){if(/for\s*\([^)]*\)\s*\{\s*if\s*\(\s*(\w+)\.includes\([^)]+\)/g.test(e)){const t=`// אופטימיזציה: שימוש ב-Set במקום array.includes\nconst ${e.match(/(\w+)\.includes/)[1]}Set = new Set(${e.match(/(\w+)\.includes/)[1]});`;e=(e=t+"\n"+e).replace(/\.includes\(/g,"Set.has(")}return e}optimizeObjectLookup(e){if(/for\s*\([^)]*\)\s*\{\s*if\s*\(\s*(\w+)\s*\[\s*[^]]+\s*\]/g.test(e)){const t=`// אופטימיזציה: שימוש ב-Map במקום object lookup\nconst ${e.match(/(\w+)\s*\[/)[1]}Map = new Map(Object.entries(${e.match(/(\w+)\s*\[/)[1]}));`;e=(e=t+"\n"+e).replace(/(\w+)\s*\[/g,"$1Map.get(")}return e}shouldOptimizeAsync(e){return e.includes("async")||e.includes("await")||e.includes("Promise")}optimizeAsync(e){let t=e;return t=this.optimizePromiseAll(t),t=this.optimizePromiseRace(t),t=this.optimizePromiseCaching(t),t}optimizePromiseAll(e){const t=/await\s+(\w+)\([^)]*\)\s*;\s*await\s+(\w+)\([^)]*\)/g;if(t.test(e)){const s="// אופטימיזציה: הרצה במקביל עם Promise.all\nconst [result1, result2] = await Promise.all([\n  "+(e.match(/await\s+(\w+)\([^)]*\)/g)||[]).map(e=>e.replace("await ","")).join(",\n  ")+"\n]);";e=e.replace(t,s)}return e}optimizePromiseRace(e){const t=/const\s+(\w+)\s*=\s*await\s+(\w+)\([^)]*\)\s*;\s*if\s*\(\s*\1\s*\)/g;if(t.test(e)){const s=`// אופטימיזציה: שימוש ב-Promise.race\nconst result = await Promise.race([\n  ${(e.match(/await\s+(\w+)\([^)]*\)/g)||[]).map(e=>e.replace("await ","")).join(",\n  ")}\n]);`;e=e.replace(t,s)}return e}optimizePromiseCaching(e){const t=e.match(/const\s+(\w+)\s*=\s*await\s+(\w+)\([^)]*\)/g)||[];if([...new Set(t)].length>1){e="// אופטימיזציה: caching של promises\nconst promiseCache = new Map();\nconst getCachedPromise = async (key, promiseFn) => {\n  if (!promiseCache.has(key)) {\n    promiseCache.set(key, promiseFn());\n  }\n  return promiseCache.get(key);\n};"+"\n"+e}return e}saveOptimizationHistory(e,t,s,i){const n={timestamp:(new Date).toISOString(),originalSize:e.length,optimizedSize:t.length,sizeReduction:e.length-t.length,sizeReductionPercent:Math.round((e.length-t.length)/e.length*100),optimizations:s,context:i,performanceGain:this.calculatePerformanceGain(e,t)};this.optimizationHistory.push(n);try{localStorage.setItem("smartOptimizerHistory",JSON.stringify(this.optimizationHistory))}catch(r){console.warn("לא ניתן לשמור היסטוריית אופטימיזציה:",r)}}calculatePerformanceGain(e,t){let s=0;return e.includes("for (")&&t.includes("len =")&&(s+=15),e.includes("new Array(")&&t.includes("[]")&&(s+=10),e.includes("document.")&&t.includes("domCache")&&(s+=25),e.includes("await")&&t.includes("Promise.all")&&(s+=30),Math.min(s,100)}getOptimizationStats(){if(0===this.optimizationHistory.length)return{totalOptimizations:0,averageSizeReduction:0,averagePerformanceGain:0,totalCodeSizeSaved:0};const e=this.optimizationHistory.reduce((e,t)=>e+t.sizeReduction,0),t=this.optimizationHistory.reduce((e,t)=>e+t.performanceGain,0);return{totalOptimizations:this.optimizationHistory.length,averageSizeReduction:Math.round(e/this.optimizationHistory.length),averagePerformanceGain:Math.round(t/this.optimizationHistory.length),totalCodeSizeSaved:e}}clearHistory(){this.optimizationHistory=[];try{localStorage.removeItem("smartOptimizerHistory")}catch(e){console.warn("לא ניתן לנקות היסטוריית אופטימיזציה:",e)}console.log("🧹 היסטוריית אופטימיזציה נוקתה")}loadHistory(){try{const e=localStorage.getItem("smartOptimizerHistory");e&&(this.optimizationHistory=JSON.parse(e),console.log("📚 היסטוריית אופטימיזציה נטענה:",this.optimizationHistory.length,"רשומות"))}catch(e){console.warn("לא ניתן לטעון היסטוריית אופטימיזציה:",e)}}toggleOptimization(){return this.isEnabled=!this.isEnabled,console.log("🔄 מערכת אופטימיזציה "+(this.isEnabled?"הופעלה":"כובתה")),this.isEnabled}getOptimizationRecommendations(){const e=[];if(this.optimizationHistory.length>0){const t=this.getOptimizationStats();t.averageSizeReduction<10&&e.push({type:"SIZE",priority:"MEDIUM",message:"שיפור קטן בגודל הקוד. שקול אופטימיזציות נוספות",suggestion:"בדוק הזדמנויות לאופטימיזציה נוספת"}),t.averagePerformanceGain<20&&e.push({type:"PERFORMANCE",priority:"HIGH",message:"שיפור נמוך בביצועים. נדרשות אופטימיזציות מתקדמות",suggestion:"השתמש באופטימיזציות מתקדמות יותר"})}return e}};n.loadHistory();const r=new class{constructor(){this.testCases=new Map,this.testResults=[],this.coverage={}}generateTests(t,s){return e(this,null,function*(){console.log("🧪 יוצר בדיקות אוטומטיות...");const e={unitTests:this.generateUnitTests(t),integrationTests:this.generateIntegrationTests(t),performanceTests:this.generatePerformanceTests(t),securityTests:this.generateSecurityTests(t)};return this.saveTestResults(s,e),e})}generateUnitTests(e){const t=[];return(e.match(/function\s+(\w+)\s*\([^)]*\)/g)||[]).forEach(s=>{const i=s.match(/function\s+(\w+)/)[1];t.push(this.createFunctionTest(i,e))}),t}createFunctionTest(e,t){return`describe('${e}', () => {\n  it('should work correctly', () => {\n    // בדיקה בסיסית\n    expect(typeof ${e}).toBe('function');\n  });\n  \n  it('should handle edge cases', () => {\n    // בדיקת מקרי קצה\n    // TODO: הוסף בדיקות ספציפיות\n  });\n});`}generateIntegrationTests(e){return"describe('Integration Tests', () => {\n  it('should work with other components', () => {\n    // בדיקת אינטגרציה\n    // TODO: הוסף בדיקות אינטגרציה\n  });\n});"}generatePerformanceTests(e){return"describe('Performance Tests', () => {\n  it('should complete within reasonable time', () => {\n    const startTime = performance.now();\n    // TODO: הוסף קוד לבדיקה\n    const endTime = performance.now();\n    expect(endTime - startTime).toBeLessThan(1000);\n  });\n});"}generateSecurityTests(e){return"describe('Security Tests', () => {\n  it('should not have XSS vulnerabilities', () => {\n    // בדיקת אבטחה\n    // TODO: הוסף בדיקות אבטחה\n  });\n});"}saveTestResults(e,t){this.testResults.push({filePath:e,timestamp:(new Date).toISOString(),tests:t})}getTestStats(){return{totalFiles:this.testResults.length,totalTests:this.testResults.reduce((e,t)=>e+Object.keys(t.tests).length,0)}}};const o=new class{constructor(){this.metrics=new Map,this.thresholds=new Map,this.alerts=[],this.isMonitoring=!1}startMonitoring(){this.isMonitoring||(this.isMonitoring=!0,this.monitorMemory(),this.monitorCPU(),this.monitorNetwork(),console.log("📊 ניטור ביצועים הופעל"))}monitorMemory(){this.isMonitoring&&setInterval(()=>{if("memory"in performance){const e=performance.memory;this.metrics.set("memory",{used:e.usedJSHeapSize,total:e.totalJSHeapSize,limit:e.jsHeapSizeLimit,timestamp:Date.now()}),this.checkMemoryThresholds(e)}},5e3)}monitorCPU(){this.isMonitoring&&setInterval(()=>{const e=performance.now();setTimeout(()=>{const t=performance.now()-e;this.metrics.set("cpu",{load:t,timestamp:Date.now()}),this.checkCPUThresholds(t)},100)},2e3)}monitorNetwork(){if(this.isMonitoring&&"connection"in navigator){const e=navigator.connection;this.metrics.set("network",{effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt,timestamp:Date.now()})}}checkMemoryThresholds(e){const t=e.usedJSHeapSize/e.jsHeapSizeLimit*100;t>80?this.createAlert("MEMORY","CRITICAL",`שימוש בזיכרון גבוה: ${t.toFixed(1)}%`):t>60&&this.createAlert("MEMORY","WARNING",`שימוש בזיכרון גבוה: ${t.toFixed(1)}%`)}checkCPUThresholds(e){e>100?this.createAlert("CPU","CRITICAL",`עומס CPU גבוה: ${e.toFixed(1)}ms`):e>50&&this.createAlert("CPU","WARNING",`עומס CPU גבוה: ${e.toFixed(1)}ms`)}createAlert(e,t,s){const i={type:e,severity:t,message:s,timestamp:(new Date).toISOString()};this.alerts.push(i),console.warn(`🚨 ${e} ${t}: ${s}`)}getPerformanceStats(){const e={};return this.metrics.forEach((t,s)=>{e[s]=t}),{metrics:e,alerts:this.alerts,isMonitoring:this.isMonitoring}}stopMonitoring(){this.isMonitoring=!1,console.log("⏹️ ניטור ביצועים הופסק")}},a=()=>{var a;const[l,c]=s.useState(""),[d,m]=s.useState(""),[h,u]=s.useState(null),[p,g]=s.useState(null),[y,x]=s.useState(null),[b,f]=s.useState(null),[w,v]=s.useState(!1),[j,M]=s.useState(!1),[N,z]=s.useState(!1);s.useEffect(()=>(o.startMonitoring(),()=>{o.stopMonitoring()}),[]);return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white p-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsx("h1",{className:"text-4xl font-bold text-center mb-8 bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"🚀 מנהל קוד מתקדם - Advanced Code Manager"}),t.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 mb-8 border border-white/20",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"📝 הזנת קוד"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsx("input",{type:"text",placeholder:"שם קובץ (אופציונלי)",value:l,onChange:e=>c(e.target.value),className:"px-4 py-2 bg-white/20 rounded-lg border border-white/30 text-white placeholder-white/60"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>e(void 0,null,function*(){if(d.trim()){v(!0);try{const e=yield i.analyzeCode(d,l||"unknown-file");u(e),console.log("✅ ניתוח קוד הושלם:",e)}catch(e){console.error("❌ שגיאה בניתוח קוד:",e),alert("שגיאה בניתוח הקוד")}finally{v(!1)}}else alert("אנא הכנס קוד לניתוח")}),disabled:w||!d.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 rounded-lg transition-colors",children:w?"🔍 מנתח...":"🔍 ניתוח קוד"}),t.jsx("button",{onClick:()=>e(void 0,null,function*(){if(d.trim()){M(!0);try{const e=yield n.optimizeCode(d,{file:l});g(e),console.log("✅ אופטימיזציה הושלמה:",e)}catch(e){console.error("❌ שגיאה באופטימיזציה:",e),alert("שגיאה באופטימיזציה")}finally{M(!1)}}else alert("אנא הכנס קוד לאופטימיזציה")}),disabled:j||!d.trim(),className:"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 rounded-lg transition-colors",children:j?"🚀 מאפשר...":"🚀 אופטימיזציה"}),t.jsx("button",{onClick:()=>e(void 0,null,function*(){if(d.trim()){z(!0);try{const e=yield r.generateTests(d,l||"unknown-file");x(e),console.log("✅ בדיקות נוצרו:",e)}catch(e){console.error("❌ שגיאה ביצירת בדיקות:",e),alert("שגיאה ביצירת בדיקות")}finally{z(!1)}}else alert("אנא הכנס קוד ליצירת בדיקות")}),disabled:N||!d.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 rounded-lg transition-colors",children:N?"🧪 יוצר...":"🧪 יצירת בדיקות"})]})]}),t.jsx("textarea",{value:d,onChange:e=>m(e.target.value),placeholder:"הכנס את הקוד שלך כאן...",rows:10,className:"w-full px-4 py-3 bg-white/20 rounded-lg border border-white/30 text-white placeholder-white/60 font-mono text-sm"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[t.jsx("button",{onClick:()=>{const e=o.getPerformanceStats();f(e),console.log("📊 סטטיסטיקות ביצועים:",e)},className:"px-6 py-3 bg-yellow-600 hover:bg-yellow-700 rounded-lg transition-colors",children:"📊 בדיקת ביצועים"}),t.jsx("button",{onClick:()=>i.clearHistory(),className:"px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"🧹 ניקוי ניתוח"}),t.jsx("button",{onClick:()=>n.clearHistory(),className:"px-6 py-3 bg-orange-600 hover:bg-orange-700 rounded-lg transition-colors",children:"🧹 ניקוי אופטימיזציה"}),t.jsx("button",{onClick:()=>{u(null),g(null),x(null),f(null),m(""),c(""),i.clearHistory(),n.clearHistory(),console.log("🧹 כל הנתונים נוקו")},className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors",children:"🗑️ ניקוי הכל"})]}),h&&t.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 mb-8 border border-white/20",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"🔍 תוצאות ניתוח קוד"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-blue-400",children:h.overallScore}),t.jsx("div",{className:"text-sm text-white/80",children:"ציון כללי"})]}),t.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-green-400",children:h.complexity.cyclomaticComplexity}),t.jsx("div",{className:"text-sm text-white/80",children:"מורכבות ציקלומטית"})]}),t.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:h.issues.length}),t.jsx("div",{className:"text-sm text-white/80",children:"בעיות שזוהו"})]}),t.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-purple-400",children:h.recommendations.length}),t.jsx("div",{className:"text-sm text-white/80",children:"המלצות"})]})]}),h.recommendations.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-3",children:"💡 המלצות שיפור"}),t.jsx("div",{className:"space-y-2",children:h.recommendations.map((e,s)=>t.jsxs("div",{className:"p-3 rounded-lg "+("CRITICAL"===e.priority?"bg-red-500/20 border border-red-500/50":"HIGH"===e.priority?"bg-orange-500/20 border border-orange-500/50":"MEDIUM"===e.priority?"bg-yellow-500/20 border border-yellow-500/50":"bg-blue-500/20 border border-blue-500/50"),children:[t.jsx("div",{className:"font-semibold",children:e.message}),t.jsx("div",{className:"text-sm text-white/80",children:e.suggestion})]},s))})]})]}),p&&t.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 mb-8 border border-white/20",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"🚀 תוצאות אופטימיזציה"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-3",children:"📊 סטטיסטיקות אופטימיזציה"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"אופטימיזציות שבוצעו:"}),t.jsx("span",{className:"font-semibold",children:(null==(a=p.optimizations)?void 0:a.length)||0})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"שיפור ביצועים:"}),t.jsxs("span",{className:"font-semibold text-green-400",children:[p.performanceGain||0,"%"]})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-3",children:"📝 קוד מותאם"}),t.jsxs("pre",{className:"bg-black/30 p-4 rounded-lg text-sm overflow-x-auto",children:[p.substring(0,500),"..."]})]})]})]}),y&&t.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 mb-8 border border-white/20",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"🧪 בדיקות שנוצרו"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(y).map(([e,s])=>t.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-3 capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),t.jsx("pre",{className:"bg-black/30 p-3 rounded-lg text-sm overflow-x-auto max-h-40",children:Array.isArray(s)?s.join("\n\n"):s})]},e))})]}),b&&t.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 mb-8 border border-white/20",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"📊 סטטיסטיקות ביצועים"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[b.metrics.memory&&t.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-3",children:"💾 זיכרון"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{children:["שימוש: ",(b.metrics.memory.used/1024/1024).toFixed(2)," MB"]}),t.jsxs("div",{children:['סה"כ: ',(b.metrics.memory.total/1024/1024).toFixed(2)," MB"]}),t.jsxs("div",{children:["מגבלה: ",(b.metrics.memory.limit/1024/1024).toFixed(2)," MB"]})]})]}),b.metrics.cpu&&t.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-3",children:"⚡ CPU"}),t.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[b.metrics.cpu.load.toFixed(1),"ms"]}),t.jsx("div",{className:"text-sm text-white/80",children:"עומס CPU"})]}),b.metrics.network&&t.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-3",children:"🌐 רשת"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{children:["סוג: ",b.metrics.network.effectiveType]}),t.jsxs("div",{children:["מהירות: ",b.metrics.network.downlink," Mbps"]}),t.jsxs("div",{children:["RTT: ",b.metrics.network.rtt,"ms"]})]})]})]}),b.alerts.length>0&&t.jsxs("div",{className:"mt-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-3",children:"🚨 התראות"}),t.jsx("div",{className:"space-y-2",children:b.alerts.map((e,s)=>t.jsxs("div",{className:"p-3 rounded-lg "+("CRITICAL"===e.severity?"bg-red-500/20 border border-red-500/50":"bg-yellow-500/20 border border-yellow-500/50"),children:[t.jsx("div",{className:"font-semibold",children:e.type}),t.jsx("div",{className:"text-sm",children:e.message})]},s))})]})]}),t.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"📈 סטטיסטיקות כללית"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-400",children:i.getAnalysisStats().totalAnalyses}),t.jsx("div",{className:"text-sm text-white/80",children:"ניתוחים שבוצעו"})]}),t.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-400",children:n.getOptimizationStats().totalOptimizations}),t.jsx("div",{className:"text-sm text-white/80",children:"אופטימיזציות שבוצעו"})]}),t.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-400",children:r.getTestStats().totalFiles}),t.jsx("div",{className:"text-sm text-white/80",children:"קבצים נבדקו"})]}),t.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:b.isMonitoring?"פעיל":"לא פעיל"}),t.jsx("div",{className:"text-sm text-white/80",children:"ניטור ביצועים"})]})]})]})]})})};export{a as default};
//# sourceMappingURL=AdvancedCodeManager-ae3073c2.js.map
