import{V as e,v as s}from"./index-3111b9b5.js";import{LucideMusic as o,LucideWifi as t,LucideWifiOff as r,AlertCircle as l,LucideRefreshCw as a,LucideMusic3 as n,LucideVolume1 as c,LucideMusic2 as i,LucideMic as d,LucidePause as u,LucidePlay as x,Download as g,LucideVolumeX as m,LucideVolume2 as p,LucideTrash2 as h,Calendar as j,Clock as b,FileAudio as f,LucideUpload as y,CheckCircle as N,LucideX as v,LucideZap as S}from"./icons-3130b023-5920a354.js";var w=Object.defineProperty,A=Object.defineProperties,P=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,k=(e,s,o)=>s in e?w(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,O=(e,s)=>{for(var o in s||(s={}))I.call(s,o)&&k(e,o,s[o]);if($)for(var o of $(s))C.call(s,o)&&k(e,o,s[o]);return e},E=(e,s)=>A(e,P(s)),M=(e,s,o)=>new Promise((t,r)=>{var l=e=>{try{n(o.next(e))}catch(s){r(s)}},a=e=>{try{n(o.throw(e))}catch(s){r(s)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,a);n((o=o.apply(e,s)).next())});const L=()=>"https://kr-studio-completeai.onrender.com/api".replace(/\/$/,""),D=(e,...s)=>M(void 0,[e,...s],function*(e,s={}){const o=`${L()}${e}`;console.log(`ðŸŒ [API] ×©×•×œ×— ×‘×§×©×” ×œ: ${o}`),console.log(`ðŸŒ [API] ×©×™×˜×ª ×‘×§×©×”: ${s.method||"GET"}`),console.log("ðŸŒ [API] ×›×•×ª×¨×•×ª:",s.headers),console.log("ðŸŒ [API] ×’×•×£ ×”×‘×§×©×”:",s.body);try{const e=performance.now(),t=yield fetch(o,E(O({},s),{headers:O({"Content-Type":"application/json"},s.headers)})),r=performance.now()-e;if(console.log(`ðŸŒ [API] ×ª×©×•×‘×” ×”×ª×§×‘×œ×” ×‘: ${r.toFixed(0)}ms`),console.log(`ðŸŒ [API] ×¡×˜×˜×•×¡ ×ª×©×•×‘×”: ${t.status} ${t.statusText}`),console.log("ðŸŒ [API] ×›×•×ª×¨×•×ª ×ª×©×•×‘×”:",Object.fromEntries(t.headers.entries())),!t.ok){console.error(`âŒ [API] ×©×’×™××” ×‘×ª×©×•×‘×”: ${t.status} ${t.statusText}`);const e=yield t.text();throw console.error("âŒ [API] ×ª×•×›×Ÿ ×©×’×™××”:",e),new Error(`HTTP ${t.status}: ${t.statusText}`)}const l=yield t.json();if(console.log("ðŸŒ [API] × ×ª×•× ×™ ×ª×©×•×‘×”:",l),l&&"boolean"==typeof l.success){if(!l.success)throw console.error("âŒ [API] ×ª×©×•×‘×” × ×›×©×œ×”:",l.error||"×”×‘×§×©×” × ×›×©×œ×”"),new Error(l.error||"×”×‘×§×©×” × ×›×©×œ×”");console.log("âœ… [API] ×ª×©×•×‘×” ×”×¦×œ×™×—×”")}return l}catch(t){throw console.error(`âŒ [API] ×©×’×™××” ×‘×‘×§×©×” ×œ-${o}:`,t),console.error("âŒ [API] ×¤×¨×˜×™ ×”×©×’×™××”:",{message:t.message,stack:t.stack,name:t.name}),t}}),U=()=>M(void 0,null,function*(){console.log("ðŸ“ [API] ×˜×•×¢×Ÿ ×¨×©×™×ž×ª ×¤×¨×•×™×§×˜×™×");try{const e=performance.now(),s=yield D("/api/projects"),o=performance.now()-e;return console.log(`ðŸ“ [API] ×¤×¨×•×™×§×˜×™× × ×˜×¢× ×• ×‘: ${o.toFixed(0)}ms`),console.log(`ðŸ“ [API] ×ž×¡×¤×¨ ×¤×¨×•×™×§×˜×™×: ${Array.isArray(s)?s.length:"×œ× ×ž×¢×¨×š"}`),s}catch(e){throw console.error("âŒ [API] ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×•×™×§×˜×™×:",e),e}});function T({trackId:e,trackData:t,isPlaying:r,volume:l,isMuted:a,onPlay:h,onVolumeChange:j,onMuteToggle:b,onDownload:f}){return s.jsxs("div",{className:`border-2 rounded-lg p-4 ${(e=>{switch(e){case"vocals":return"border-blue-500 bg-blue-500/10";case"drums":return"border-green-500 bg-green-500/10";case"bass":return"border-purple-500 bg-purple-500/10";case"guitar":return"border-orange-500 bg-orange-500/10";default:return"border-gray-500 bg-gray-500/10"}})(e)}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[(e=>{switch(e){case"vocals":return s.jsx(d,{className:"w-5 h-5 text-blue-400"});case"drums":return s.jsx(i,{className:"w-5 h-5 text-green-400"});case"bass":return s.jsx(c,{className:"w-5 h-5 text-purple-400"});case"guitar":return s.jsx(n,{className:"w-5 h-5 text-orange-400"});default:return s.jsx(o,{className:"w-5 h-5 text-gray-400"})}})(e),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-white",children:(e=>{switch(e){case"vocals":return"×•×•×§××œ";case"drums":return"×ª×•×¤×™×";case"bass":return"×‘×¡";case"guitar":return"×’×™×˜×¨×”";case"other":return"××—×¨";default:return e}})(e)}),s.jsx("p",{className:"text-sm text-gray-400",children:(null==t?void 0:t.duration)?`${Math.round(t.duration)}s`:"×˜×•×¢×Ÿ..."})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:h,className:"p-2 rounded-lg transition-colors "+(r?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"),children:r?s.jsx(u,{className:"w-4 h-4"}):s.jsx(x,{className:"w-4 h-4"})}),s.jsx("button",{onClick:f,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:"×”×•×¨×“ ×¢×¨×•×¥",children:s.jsx(g,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:b,className:"p-2 rounded-lg transition-colors "+(a?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-600 hover:bg-gray-700 text-white"),title:a?"×”×¤×¢×œ ×¢×¨×•×¥":"×”×©×ª×§ ×¢×¨×•×¥",children:a?s.jsx(m,{className:"w-4 h-4"}):s.jsx(p,{className:"w-4 h-4"})}),s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:l,onChange:e=>j(parseFloat(e.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider",disabled:a})}),s.jsxs("span",{className:"text-sm text-gray-400 w-12 text-right",children:[Math.round(100*l),"%"]})]}),s.jsx("div",{className:"mt-4 h-16 bg-gray-800 rounded-lg flex items-center justify-center",children:s.jsx("div",{className:"text-gray-500 text-sm",children:"×’×œ ××•×“×™×•"})})]})}function Z({project:e,onSelect:t,onDelete:r}){const l="completed"===(a=e).status?{text:"×”×•×©×œ×",color:"text-green-400",bg:"bg-green-500/10"}:"processing"===a.status?{text:"×ž×¢×‘×“",color:"text-yellow-400",bg:"bg-yellow-500/10"}:"failed"===a.status?{text:"× ×›×©×œ",color:"text-red-400",bg:"bg-red-500/10"}:{text:"×œ× ×™×“×•×¢",color:"text-gray-400",bg:"bg-gray-500/10"};var a,n;return s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 hover:border-purple-500/50 transition-all duration-300",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg flex items-center justify-center",children:s.jsx(o,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-white text-lg truncate max-w-32",children:e.name||"×¤×¨×•×™×§×˜ ×œ×œ× ×©×"}),s.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${l.bg} ${l.color}`,children:l.text})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>t(e),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:"×¤×ª×— ×¤×¨×•×™×§×˜",children:s.jsx(x,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>r(e.id),className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",title:"×ž×—×§ ×¤×¨×•×™×§×˜",children:s.jsx(h,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"×¢×¨×•×¦×™× ×ž×•×¤×¨×“×™×:"}),s.jsxs("span",{className:"text-white font-medium",children:[(n=e,n.stems?Object.keys(n.stems).length:0),"/5"]})]}),e.createdAt&&s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[s.jsx(j,{className:"w-4 h-4"}),s.jsx("span",{children:(e=>{try{return new Date(e).toLocaleDateString("he-IL",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(s){return"×ª××¨×™×š ×œ× ×™×“×•×¢"}})(e.createdAt)})]}),e.duration&&s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[s.jsx(b,{className:"w-4 h-4"}),s.jsxs("span",{children:[Math.round(e.duration),"s"]})]})]}),e.stems&&Object.keys(e.stems).length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"×¢×¨×•×¦×™× ×–×ž×™× ×™×:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(e.stems).map(e=>s.jsx("span",{className:"px-2 py-1 bg-gray-700 text-gray-300 text-xs rounded-full",children:"vocals"===e?"×•×•×§××œ":"drums"===e?"×ª×•×¤×™×":"bass"===e?"×‘×¡":"guitar"===e?"×’×™×˜×¨×”":"other"===e?"××—×¨":e},e))})]}),s.jsx("div",{className:"mt-4 pt-3 border-t border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>t(e),className:"flex-1 bg-gradient-to-r from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-300 mr-2",children:"×¤×ª×— ×‘×¡×˜×•×“×™×•"}),e.stems&&Object.keys(e.stems).length>0&&s.jsx("button",{onClick:()=>{Object.keys(e.stems).forEach(e=>{})},className:"p-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",title:"×”×•×¨×“ ××ª ×›×œ ×”×¢×¨×•×¦×™×",children:s.jsx(g,{className:"w-4 h-4"})})]})})]})}function F(){return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(o,{className:"w-12 h-12 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"××™×Ÿ ×¢×¨×•×¦×™ ××•×“×™×• ×–×ž×™× ×™×"}),s.jsx("p",{className:"text-gray-400 mb-6 max-w-md mx-auto",children:"×¢×“×™×™×Ÿ ×œ× ×”×•×¤×¨×“×• ×¢×¨×•×¦×™ ××•×“×™×• ×œ×¤×¨×•×™×§×˜ ×–×”. ×× × ×”×ž×ª×Ÿ ×œ×¡×™×•× ×”×ª×”×œ×™×š ××• ×¦×•×¨ ×¤×¨×•×™×§×˜ ×—×“×©."}),s.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(f,{className:"w-4 h-4"}),s.jsx("span",{children:"×•×•×§××œ"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(f,{className:"w-4 h-4"}),s.jsx("span",{children:"×ª×•×¤×™×"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(f,{className:"w-4 h-4"}),s.jsx("span",{children:"×‘×¡"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(f,{className:"w-4 h-4"}),s.jsx("span",{children:"×’×™×˜×¨×”"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(f,{className:"w-4 h-4"}),s.jsx("span",{children:"××—×¨"})]})]})]})}function z({onFileSelect:o,onDrop:t,disabled:r=!1}){const[l,a]=e.useState(!1),[n,c]=e.useState(null);e.useRef(null);const i=e=>{console.log(`ðŸ–±ï¸ [UploadZone] Drag Over - disabled: ${r}`),r||(e.preventDefault(),a(!0),console.log("âœ… [UploadZone] Drag Over ×”×•×¤×¢×œ"))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 "+(r?"border-gray-500 bg-gray-800/50 cursor-not-allowed opacity-50":l?"border-purple-500 bg-purple-500/10 cursor-pointer":"border-gray-600 hover:border-purple-500 hover:bg-gray-800/50 cursor-pointer"),onDrop:e=>{if(console.log(`ðŸ–±ï¸ [UploadZone] Drop - disabled: ${r}`),r)return;e.preventDefault(),a(!1);const s=Array.from(e.dataTransfer.files);if(console.log("ðŸ“ [UploadZone] ×§×‘×¦×™× ×©×”×•×¢×‘×¨×•:",s.map(e=>({name:e.name,size:e.size,type:e.type}))),s.length>0){const e=s[0];console.log(`ðŸ“ [UploadZone] ×§×•×‘×¥ × ×‘×—×¨: ${e.name} (${e.size} bytes, ${e.type})`);try{c(e),t(e),console.log("âœ… [UploadZone] ×§×•×‘×¥ × ×ž×¡×¨ ×‘×”×¦×œ×—×”")}catch(o){console.error("âŒ [UploadZone] ×©×’×™××” ×‘×ž×¡×™×¨×ª ×§×•×‘×¥:",o)}}else console.log("âš ï¸ [UploadZone] ×œ× × ×ž×¦××• ×§×‘×¦×™× ×‘-Drop")},onDragOver:i,onDragEnter:i,onDragLeave:e=>{console.log("ðŸ–±ï¸ [UploadZone] Drag Leave"),e.preventDefault(),a(!1),console.log("âœ… [UploadZone] Drag Leave ×”×•×¤×¢×œ")},onClick:()=>{var e;console.log(`ðŸ–±ï¸ [UploadZone] ×œ×—×™×¦×” ×¢×œ ××–×•×¨ ×”×¢×œ××” - disabled: ${r}`),r?console.log("âš ï¸ [UploadZone] ×”×¢×œ××” ×ž×•×©×‘×ª×ª"):(console.log("âœ… [UploadZone] ×¤×•×ª×— ×‘×—×™×¨×ª ×§×•×‘×¥"),null==(e=document.getElementById("file-input"))||e.click())},children:[s.jsx("input",{id:"file-input",type:"file",accept:"audio/*",onChange:e=>{if(console.log(`ðŸ–±ï¸ [UploadZone] File Input - disabled: ${r}`),r)return;const s=Array.from(e.target.files);if(console.log("ðŸ“ [UploadZone] ×§×‘×¦×™× × ×‘×—×¨×•:",s.map(e=>({name:e.name,size:e.size,type:e.type}))),s.length>0){const e=s[0];console.log(`ðŸ“ [UploadZone] ×§×•×‘×¥ × ×‘×—×¨: ${e.name} (${e.size} bytes, ${e.type})`);try{c(e),o(e),console.log("âœ… [UploadZone] ×§×•×‘×¥ × ×ž×¡×¨ ×‘×”×¦×œ×—×”")}catch(t){console.error("âŒ [UploadZone] ×©×’×™××” ×‘×ž×¡×™×¨×ª ×§×•×‘×¥:",t)}}else console.log("âš ï¸ [UploadZone] ×œ× × ×ž×¦××• ×§×‘×¦×™× ×‘×‘×—×™×¨×”")},className:"hidden",disabled:r}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center mx-auto",children:s.jsx(y,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"×”×¢×œ×” ×§×•×‘×¥ ××•×“×™×•"}),s.jsx("p",{className:"text-gray-400",children:"×’×¨×•×¨ ×•×–×¨×•×§ ×§×•×‘×¥ ××•×“×™×• ×œ×›××Ÿ, ××• ×œ×—×¥ ×œ×‘×—×™×¨×”"})]}),s.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[s.jsx("p",{children:"×§×‘×¦×™× × ×ª×ž×›×™×: MP3, WAV, FLAC, M4A, OGG"}),s.jsx("p",{children:"×’×•×“×œ ×ž×§×¡×™×ž×œ×™: 50MB"})]})]})]}),n&&s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(f,{className:"w-8 h-8 text-blue-400"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-white truncate",children:n.name}),s.jsxs("p",{className:"text-sm text-gray-400",children:[(e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024)),o=parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s];return console.log(`ðŸ“ [UploadZone] ×’×•×“×œ ×§×•×‘×¥: ${e} bytes = ${o}`),o})(n.size)," â€¢ ",n.type]})]}),s.jsx("div",{className:"text-green-400 text-sm font-medium",children:"× ×‘×—×¨"})]})}),s.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-200 mb-2",children:"××™×š ×–×” ×¢×•×‘×“?"}),s.jsxs("ol",{className:"text-blue-200 text-sm space-y-1 list-decimal list-inside",children:[s.jsx("li",{children:"×”×¢×œ×” ×§×•×‘×¥ ××•×“×™×• (×©×™×¨, ×”×§×œ×˜×”, ××• ×›×œ ×§×•×‘×¥ ××•×“×™×• ××—×¨)"}),s.jsx("li",{children:"×”×ž×¢×¨×›×ª ×ª× ×ª×— ××ª ×”××•×“×™×• ×•×ª×¤×¨×™×“ ××•×ª×• ×œ-5 ×¢×¨×•×¦×™× × ×¤×¨×“×™×"}),s.jsx("li",{children:"×§×‘×œ ×’×™×©×” ×œ×›×œ ×¢×¨×•×¥ ×‘× ×¤×¨×“: ×•×•×§××œ, ×ª×•×¤×™×, ×‘×¡, ×’×™×˜×¨×” ×•××—×¨"}),s.jsx("li",{children:"×”×•×¨×“ ×›×œ ×¢×¨×•×¥ ×‘× ×¤×¨×“ ××• ×¢×¨×‘×‘ ××•×ª× ×ž×—×“×© ×‘×¡×˜×•×“×™×•"})]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-white mb-2",children:"×˜×™×¤×™× ×œ××•×“×™×• ××™×›×•×ª×™"}),s.jsxs("ul",{className:"text-gray-300 text-sm space-y-1",children:[s.jsx("li",{children:"â€¢ ×”×©×ª×ž×© ×‘×§×‘×¦×™ ××•×“×™×• ×‘××™×›×•×ª ×’×‘×•×”×” (320kbps MP3 ××• WAV)"}),s.jsx("li",{children:"â€¢ ×”×™×ž× ×¢ ×ž×§×‘×¦×™× ×¢× ×¨×¢×© ×¨×§×¢ ×ž×•×’×–×"}),s.jsx("li",{children:"â€¢ ××•×¨×š ××•×¤×˜×™×ž×œ×™: 1-10 ×“×§×•×ª"}),s.jsx("li",{children:"â€¢ ×ª×”×œ×™×š ×”×”×¤×¨×“×” ×œ×•×§×— 2-5 ×“×§×•×ª ×‘×”×ª×× ×œ××•×¨×š ×”×§×•×‘×¥"})]})]})]})}function J({step:o,progress:t,error:r,fileName:n,onRetry:c,onCancel:i}){console.log("ðŸ“Š [ProcessingStatus] ×¨×›×™×‘ × ×˜×¢×Ÿ ×¢×:",{step:o,progress:t,error:null==r?void 0:r.message,fileName:n});const[d,u]=e.useState(0),[x,g]=e.useState(null);e.useEffect(()=>{let e;return"uploading"!==o&&"separating"!==o&&"processing"!==o||(e=setInterval(()=>{u(e=>e+1)},1e3)),()=>clearInterval(e)},[o]),e.useEffect(()=>{if(t>0&&d>0){const e=d/t*100,s=Math.max(0,e-d);g(Math.round(s))}},[t,d]);const m=e=>{if(!e||e<0)return"00:00";const s=Math.floor(e/60),o=Math.floor(e%60),t=`${s.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`;return console.log(`â° [ProcessingStatus] ×–×ž×Ÿ ×ž×¢×•×¦×‘: ${e}s = ${t}`),t},p=e=>{switch(console.log(`ðŸŽ¨ [ProcessingStatus] ×ž×—×¤×© ×¦×‘×¢ ×¢×‘×•×¨ ×©×œ×‘: ${e}`),e){case"uploading":return console.log("ðŸŽ¨ [ProcessingStatus] ×¦×‘×¢ Uploading: from-blue-500 to-blue-600"),"from-blue-500 to-blue-600";case"separating":return console.log("ðŸŽ¨ [ProcessingStatus] ×¦×‘×¢ Separating: from-purple-500 to-purple-600"),"from-purple-500 to-purple-600";case"monitoring":return console.log("ðŸŽ¨ [ProcessingStatus] ×¦×‘×¢ Monitoring: from-green-500 to-green-600"),"from-green-500 to-green-600";case"completed":return console.log("ðŸŽ¨ [ProcessingStatus] ×¦×‘×¢ Completed: from-green-500 to-green-600"),"from-green-500 to-green-600";case"error":return console.log("ðŸŽ¨ [ProcessingStatus] ×¦×‘×¢ Error: from-red-500 to-red-600"),"from-red-500 to-red-600";default:return console.log(`ðŸŽ¨ [ProcessingStatus] ×¦×‘×¢ ×‘×¨×™×¨×ª ×ž×—×“×œ ×¢×‘×•×¨: ${e}`),"from-purple-500 to-purple-600"}},h=()=>{console.log("ðŸ”„ [ProcessingStatus] ×›×¤×ª×•×¨ Retry × ×œ×—×¥");try{null==c||c(),console.log("âœ… [ProcessingStatus] Retry ×”×•×¤×¢×œ ×‘×”×¦×œ×—×”")}catch(e){console.error("âŒ [ProcessingStatus] ×©×’×™××” ×‘-Retry:",e)}};return s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${p(o)} rounded-xl flex items-center justify-center`,children:(e=>{switch(console.log(`ðŸŽ¨ [ProcessingStatus] ×ž×—×¤×© ××™×™×§×•×Ÿ ×¢×‘×•×¨ ×©×œ×‘: ${e}`),e){case"uploading":return console.log("ðŸŽ¨ [ProcessingStatus] ××™×™×§×•×Ÿ Uploading: Upload"),s.jsx(Upload,{className:"w-8 h-8 text-blue-400"});case"separating":return console.log("ðŸŽ¨ [ProcessingStatus] ××™×™×§×•×Ÿ Separating: Split"),s.jsx(Split,{className:"w-8 h-8 text-purple-400"});case"monitoring":return console.log("ðŸŽ¨ [ProcessingStatus] ××™×™×§×•×Ÿ Monitoring: Eye"),s.jsx(Eye,{className:"w-8 h-8 text-green-400"});case"completed":return console.log("ðŸŽ¨ [ProcessingStatus] ××™×™×§×•×Ÿ Completed: CheckCircle"),s.jsx(N,{className:"w-8 h-8 text-green-400"});case"error":return console.log("ðŸŽ¨ [ProcessingStatus] ××™×™×§×•×Ÿ Error: XCircle"),s.jsx(XCircle,{className:"w-8 h-8 text-red-400"});default:return console.log(`ðŸŽ¨ [ProcessingStatus] ××™×™×§×•×Ÿ ×‘×¨×™×¨×ª ×ž×—×“×œ ×¢×‘×•×¨: ${e}`),s.jsx(Circle,{className:"w-8 h-8 text-purple-400"})}})(o)}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:(e=>{switch(console.log(`ðŸ“ [ProcessingStatus] ×ž×—×¤×© ×˜×§×¡×˜ ×¢×‘×•×¨ ×©×œ×‘: ${e}`),e){case"uploading":return console.log("ðŸ“ [ProcessingStatus] ×˜×§×¡×˜ Uploading: ×ž×¢×œ×” ×§×•×‘×¥..."),"×ž×¢×œ×” ×§×•×‘×¥...";case"separating":return console.log("ðŸ“ [ProcessingStatus] ×˜×§×¡×˜ Separating: ×ž×¤×¨×™×“ ×¢×¨×•×¦×™×..."),"×ž×¤×¨×™×“ ×¢×¨×•×¦×™×...";case"monitoring":return console.log("ðŸ“ [ProcessingStatus] ×˜×§×¡×˜ Monitoring: ×¢×•×§×‘ ××—×¨ ×”×ª×§×“×ž×•×ª..."),"×¢×•×§×‘ ××—×¨ ×”×ª×§×“×ž×•×ª...";case"completed":return console.log("ðŸ“ [ProcessingStatus] ×˜×§×¡×˜ Completed: ×”×•×©×œ× ×‘×”×¦×œ×—×”!"),"×”×•×©×œ× ×‘×”×¦×œ×—×”!";case"error":return console.log("ðŸ“ [ProcessingStatus] ×˜×§×¡×˜ Error: ×©×’×™××” ×‘×¢×™×‘×•×“"),"×©×’×™××” ×‘×¢×™×‘×•×“";default:return console.log(`ðŸ“ [ProcessingStatus] ×˜×§×¡×˜ ×‘×¨×™×¨×ª ×ž×—×“×œ ×¢×‘×•×¨: ${e}`),"×ž×¢×‘×“..."}})(o)}),s.jsx("p",{className:"text-gray-400",children:(e=>{switch(console.log(`ðŸ“„ [ProcessingStatus] ×ž×—×¤×© ×ª×™××•×¨ ×¢×‘×•×¨ ×©×œ×‘: ${e}`),e){case"uploading":return console.log("ðŸ“„ [ProcessingStatus] ×ª×™××•×¨ Uploading: ×ž×¢×œ×” ××ª ×”×§×•×‘×¥ ×œ×©×¨×ª..."),"×ž×¢×œ×” ××ª ×”×§×•×‘×¥ ×œ×©×¨×ª...";case"separating":return console.log("ðŸ“„ [ProcessingStatus] ×ª×™××•×¨ Separating: ×ž×¤×¨×™×“ ××ª ×”××•×“×™×• ×œ×¢×¨×•×¦×™× × ×¤×¨×“×™×..."),"×ž×¤×¨×™×“ ××ª ×”××•×“×™×• ×œ×¢×¨×•×¦×™× × ×¤×¨×“×™×...";case"monitoring":return console.log("ðŸ“„ [ProcessingStatus] ×ª×™××•×¨ Monitoring: ×¢×•×§×‘ ××—×¨ ×”×ª×§×“×ž×•×ª ×”×”×¤×¨×“×”..."),"×¢×•×§×‘ ××—×¨ ×”×ª×§×“×ž×•×ª ×”×”×¤×¨×“×”...";case"completed":return console.log("ðŸ“„ [ProcessingStatus] ×ª×™××•×¨ Completed: ×”×”×¤×¨×“×” ×”×•×©×œ×ž×” ×‘×”×¦×œ×—×”!"),"×”×”×¤×¨×“×” ×”×•×©×œ×ž×” ×‘×”×¦×œ×—×”!";case"error":return console.log("ðŸ“„ [ProcessingStatus] ×ª×™××•×¨ Error: ××™×¨×¢×” ×©×’×™××” ×‘×¢×™×‘×•×“ ×”×§×•×‘×¥"),"××™×¨×¢×” ×©×’×™××” ×‘×¢×™×‘×•×“ ×”×§×•×‘×¥";default:return console.log(`ðŸ“„ [ProcessingStatus] ×ª×™××•×¨ ×‘×¨×™×¨×ª ×ž×—×“×œ ×¢×‘×•×¨: ${e}`),"×ž×¢×‘×“ ××ª ×”×§×•×‘×¥..."}})(o)})]})]}),i&&s.jsx("button",{onClick:()=>{console.log("âŒ [ProcessingStatus] ×›×¤×ª×•×¨ Cancel × ×œ×—×¥");try{null==i||i(),console.log("âœ… [ProcessingStatus] Cancel ×”×•×¤×¢×œ ×‘×”×¦×œ×—×”")}catch(e){console.error("âŒ [ProcessingStatus] ×©×’×™××” ×‘-Cancel:",e)}},className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",title:"×‘×˜×œ ×ª×”×œ×™×š",children:s.jsx(v,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm text-gray-400",children:"×”×ª×§×“×ž×•×ª"}),s.jsxs("span",{className:"text-sm font-medium text-white",children:[Math.round(t),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:s.jsx("div",{className:`h-3 bg-gradient-to-r ${p(o)} rounded-full transition-all duration-500 ease-out`,style:{width:`${t}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(b,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-400",children:"×–×ž×Ÿ ×©×—×œ×£"})]}),s.jsx("span",{className:"text-lg font-semibold text-white",children:m(d)})]}),null!==x&&s.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(b,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-400",children:"×–×ž×Ÿ ×ž×©×•×¢×¨ × ×•×ª×¨"})]}),s.jsx("span",{className:"text-lg font-semibold text-white",children:m(x)})]})]}),n&&s.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(f,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-400",children:"×§×•×‘×¥"})]}),s.jsx("span",{className:"text-white font-medium truncate",children:n})]}),r&&s.jsxs("div",{className:"bg-red-900/50 border border-red-500 rounded-lg p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(l,{className:"w-5 h-5 text-red-400"}),s.jsx("span",{className:"text-red-200 font-medium",children:"×©×’×™××”"})]}),s.jsx("p",{className:"text-red-200",children:r})]}),r&&c&&s.jsx("div",{className:"flex items-center justify-center space-x-4",children:s.jsxs("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center space-x-2",children:[s.jsx(a,{className:"w-4 h-4"}),s.jsx("span",{children:"× ×¡×” ×©×•×‘"})]})}),"loading-project"===o&&c&&s.jsx("div",{className:"flex items-center justify-center space-x-4",children:s.jsxs("button",{onClick:h,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center space-x-2",children:[s.jsx(a,{className:"w-4 h-4"}),s.jsx("span",{children:"× ×¡×” ×œ×˜×¢×•×Ÿ ×©×•×‘"})]})}),"separating"===o&&s.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(S,{className:"w-4 h-4 text-blue-400"}),s.jsx("span",{className:"text-blue-200 font-medium",children:"×˜×™×¤×™× ×œ×¢×™×‘×•×“"})]}),s.jsxs("ul",{className:"text-blue-200 text-sm space-y-1",children:[s.jsx("li",{children:"â€¢ ×”×¤×¨×“×ª ××•×“×™×• ××™×›×•×ª×™×ª ×œ×•×§×—×ª ×–×ž×Ÿ - ×× × ×”×ž×ª×Ÿ ×‘×¡×‘×œ× ×•×ª"}),s.jsx("li",{children:"â€¢ ××™×›×•×ª ×”×ª×•×¦××” ×ª×œ×•×™×” ×‘××™×›×•×ª ×”×§×•×‘×¥ ×”×ž×§×•×¨×™"}),s.jsx("li",{children:"â€¢ × ×™×ª×Ÿ ×œ×¡×’×•×¨ ××ª ×”×“×£ - ×”×ª×”×œ×™×š ×™×ž×©×™×š ×œ×¤×¢×•×œ ×‘×©×¨×ª"})]})]}),"loading-project"===o&&s.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(a,{className:"w-4 h-4 text-green-400"}),s.jsx("span",{className:"text-green-200 font-medium",children:"×˜×™×¤×™× ×œ×˜×¢×™× ×ª ×¤×¨×•×™×§×˜"})]}),s.jsxs("ul",{className:"text-green-200 text-sm space-y-1",children:[s.jsx("li",{children:"â€¢ ×”×”×¤×¨×“×” ×”×•×©×œ×ž×”! ×”×ž×¢×¨×›×ª ×˜×•×¢× ×ª ××ª ×”×¤×¨×•×™×§×˜ ×”×ž×•×›×Ÿ"}),s.jsx("li",{children:'â€¢ ×× ×”×˜×¢×™× ×” × ×›×©×œ×ª, ×œ×—×¥ ×¢×œ "× ×¡×” ×œ×˜×¢×•×Ÿ ×©×•×‘"'}),s.jsx("li",{children:'â€¢ × ×™×ª×Ÿ ×’× ×œ×œ×—×•×¥ ×¢×œ "×¤×ª×— ×‘×¡×˜×•×“×™×•" ×ž×”×¨×©×™×ž×” ×œ×ž×˜×”'}),s.jsx("li",{children:"â€¢ ×”×ž×¢×¨×›×ª ×ª× ×¡×” ×œ×˜×¢×•×Ÿ ××•×˜×•×ž×˜×™×ª ×ž×¡×¤×¨ ×¤×¢×ž×™×"})]})]})]})}const R=()=>{const[n,c]=e.useState(null),[i,d]=e.useState(""),[u,x]=e.useState(!1),[g,m]=e.useState(0),[p,h]=e.useState([]),[j,b]=e.useState(null),[f,y]=e.useState({}),[N,v]=e.useState(null),[S,w]=e.useState({}),[A,P]=e.useState(0),[$,I]=e.useState(0),[C,k]=e.useState({}),[R,B]=e.useState({}),[V,G]=e.useState("upload"),[W,X]=e.useState(!0),[K,H]=e.useState(null),[_,q]=e.useState("uploading"),[Q,Y]=e.useState(!1),[ee,se]=e.useState(null),[oe,te]=e.useState(null),[re,le]=e.useState(null),[ae,ne]=e.useState(null),[ce,ie]=e.useState("checking");e.useState(null),e.useState(!1),e.useRef();const de=e.useRef();e.useEffect(()=>{try{return de.current=new(window.AudioContext||window.webkitAudioContext),()=>{de.current&&de.current.close(),Object.keys(f).length>0&&pe()}}catch(e){console.error("âŒ ×©×’×™××” ×‘×™×¦×™×¨×ª AudioContext:",e),se("×©×’×™××” ×‘××ª×—×•×œ ×ž×¢×¨×›×ª ×”××•×“×™×• - × ×¡×” ×œ×¨×¢× ×Ÿ ××ª ×”×“×£")}},[f]),e.useEffect(()=>{try{fe()}catch(e){console.error("âŒ ×©×’×™××” ×‘×‘×“×™×§×ª ×—×™×‘×•×¨ ×œ×©×¨×ª:",e),se("×©×’×™××” ×‘×‘×“×™×§×ª ×—×™×‘×•×¨ ×œ×©×¨×ª - × ×¡×” ×œ×¨×¢× ×Ÿ ××ª ×”×“×£")}},[]);const ue=e=>M(void 0,null,function*(){console.log(`ðŸ” [AudioSeparation] ×˜×•×¢×Ÿ ×¤×¨×•×™×§×˜: ${e}`);try{console.log(`ðŸ” [AudioSeparation] ×©×•×œ×— ×‘×§×©×” ×œ×©×¨×ª: /api/projects/${e}`);const o=yield(s=e,M(void 0,null,function*(){console.log(`ðŸ“ [API] ×˜×•×¢×Ÿ ×¤×¨×•×™×§×˜: id=${s}`);try{const e=performance.now(),o=yield D(`/api/projects/${s}`),t=performance.now()-e;return console.log(`ðŸ“ [API] ×¤×¨×•×™×§×˜ × ×˜×¢×Ÿ ×‘: ${t.toFixed(0)}ms`),console.log("ðŸ“ [API] ×¤×¨×˜×™ ×¤×¨×•×™×§×˜:",o),o}catch(e){throw console.error(`âŒ [API] ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×•×™×§×˜ ${s}:`,e),e}}));console.log("ðŸ” [AudioSeparation] ×ª×©×•×‘×” ×ž×”×©×¨×ª:",o),o?(console.log("ðŸ” [AudioSeparation] ×¤×¨×•×™×§×˜ × ×˜×¢×Ÿ ×‘×”×¦×œ×—×”:",o.projectName),h(s=>s.map(s=>s.id===e?E(O(O({},s),o),{status:"completed",progress:100}):s)),b(o),G("studio")):console.log("ðŸ” [AudioSeparation] ×¤×¨×•×™×§×˜ ×œ× × ×ž×¦× ×‘×©×¨×ª")}catch(o){console.error(`âŒ [AudioSeparation] ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×•×™×§×˜ ${e}:`,o),console.log("ðŸ” [AudioSeparation] ×ž× ×¡×” ×œ×˜×¢×•×Ÿ ×¤×¨×•×™×§×˜ ×ž-localStorage...");const s=JSON.parse(localStorage.getItem("audioSeparationProjects")||"[]").find(s=>s.id===e);s&&(console.log("ðŸ” [AudioSeparation] ×¤×¨×•×™×§×˜ × ×ž×¦× ×‘-localStorage:",s.projectName),b(s),G("studio"))}var s}),xe=e=>M(void 0,null,function*(){if(console.log("ðŸ“ [AudioSeparation] ×§×•×‘×¥ × ×‘×—×¨:",e.name,"×’×•×“×œ:",e.size,"×¡×•×’:",e.type),e)return["audio/mpeg","audio/wav","audio/flac","audio/mp4","audio/ogg"].includes(e.type)?e.size>104857600?(console.log("âŒ [AudioSeparation] ×§×•×‘×¥ ×’×“×•×œ ×ž×“×™:",e.size/1048576,"MB"),void alert("×”×§×•×‘×¥ ×’×“×•×œ ×ž×“×™. ×’×•×“×œ ×ž×§×¡×™×ž×œ×™: 100MB")):(console.log("âœ… [AudioSeparation] ×§×•×‘×¥ ×ª×§×™×Ÿ, ×ž×ž×©×™×š..."),c(e),void G("upload")):(console.log("âŒ [AudioSeparation] ×¡×•×’ ×§×•×‘×¥ ×œ× × ×ª×ž×š:",e.type),void alert("×¡×•×’ ×§×•×‘×¥ ×œ× × ×ª×ž×š. ×× × ×‘×—×¨ ×§×•×‘×¥ ××•×“×™×• (MP3, WAV, FLAC, M4A, OGG)"));console.log("âŒ [AudioSeparation] ×§×•×‘×¥ ×œ× ×ª×§×™×Ÿ")}),ge=()=>M(void 0,null,function*(){console.log("ðŸ”„ ×ž× ×¡×” ×©×•×‘ ××ª ×”×ª×”×œ×™×š..."),se(null);try{if(j&&j.id){console.log("ðŸ”„ ×ž× ×¡×” ×œ×˜×¢×•×Ÿ ×¤×¨×•×™×§×˜ ×§×™×™×:",j.id);const e=yield(e=>M(void 0,null,function*(){console.log(`ðŸ” [AudioSeparation] ×‘×•×“×§ ×¡×˜×˜×•×¡ ×¤×¨×•×™×§×˜ ×ž×ª×§×“×: ${e}`);try{console.log(`ðŸ” [AudioSeparation] ×©×•×œ×— ×‘×§×©×” ×œ×©×¨×ª: /api/separate/${e}/progress`);const o=yield(s=e,M(void 0,null,function*(){console.log(`ðŸ“Š [API] ×‘×•×“×§ ×”×ª×§×“×ž×•×ª ×”×¤×¨×“×”: fileId=${s}`);try{const e=performance.now(),o=yield D(`/api/separate/${s}/progress`),t=performance.now()-e;return console.log(`ðŸ“Š [API] ×”×ª×§×“×ž×•×ª ×”×ª×§×‘×œ×” ×‘: ${t.toFixed(0)}ms`),console.log("ðŸ“Š [API] × ×ª×•× ×™ ×”×ª×§×“×ž×•×ª:",o),o}catch(e){throw console.error("âŒ [API] ×©×’×™××” ×‘×‘×“×™×§×ª ×”×ª×§×“×ž×•×ª:",e),e}}));console.log("ðŸ” [AudioSeparation] ×ª×©×•×‘×” ×ž×”×©×¨×ª:",o),o&&void 0!==o.progress&&(console.log(`ðŸ” [AudioSeparation] ×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡: ${o.progress}% - ${o.status}`),h(s=>s.map(s=>s.id===e?E(O({},s),{progress:o.progress,status:o.status}):s)),"completed"===o.status&&(console.log(`ðŸ” [AudioSeparation] ×¤×¨×•×™×§×˜ ×”×•×©×œ×: ${e}`),yield ue(e)))}catch(o){console.error(`âŒ [AudioSeparation] ×©×’×™××” ×‘×‘×“×™×§×ª ×¡×˜×˜×•×¡ ×¤×¨×•×™×§×˜ ${e}:`,o),console.log("ðŸ” [AudioSeparation] ×ž× ×¡×” ×œ×˜×¢×•×Ÿ ×¤×¨×•×™×§×˜ ×™×©×™×¨×•×ª...");try{yield ue(e)}catch(t){console.error(`âŒ [AudioSeparation] ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×•×™×§×˜ ${e}:`,t)}}var s}))(j.id);return console.log("ðŸ” ×¡×˜×˜×•×¡ ×¤×¨×•×™×§×˜:",e),e.isReady?(yield ue(j.id))?(console.log("ðŸŽ‰ ×”×¤×¨×•×™×§×˜ × ×˜×¢×Ÿ ×‘×”×¦×œ×—×”!"),void se(null)):(console.error("âŒ ×”×¤×¨×•×™×§×˜ ×œ× × ×˜×¢×Ÿ ×œ×ž×¨×•×ª ×©×”×•× ×ž×•×›×Ÿ"),void se("×”×¤×¨×•×™×§×˜ ×ž×•×›×Ÿ ××‘×œ ×œ× × ×˜×¢×Ÿ. × ×¡×” ×œ×¨×¢× ×Ÿ ××ª ×”×“×£.")):(console.warn("âš ï¸ ×”×¤×¨×•×™×§×˜ ×œ× ×ž×•×›×Ÿ:",e.reason),se(e.reason),void("loading-project"===_&&(console.log("â³ ×ž×ž×ª×™×Ÿ 5 ×©× ×™×•×ª ×•× ×¡×” ×©×•×‘..."),setTimeout(()=>{ge()},5e3))))}K?(console.log("ðŸ”„ ×ž× ×¡×” ×©×•×‘ ×¢× ×”×§×•×‘×¥ ×”×ž×§×•×¨×™..."),yield xe(K)):n?(console.log("ðŸ”„ ×ž× ×¡×” ×©×•×‘ ×¢× ×”×§×•×‘×¥ ×©×”×•×¢×œ×”..."),yield xe(n)):(console.log("ðŸ”„ ××™×Ÿ ×§×•×‘×¥ ×–×ž×™×Ÿ, ×—×•×–×¨ ×œ×ž×¡×š ×”×¢×œ××”..."),he())}catch(e){console.error("âŒ ×©×’×™××” ×‘× ×™×¡×™×•×Ÿ ×—×•×–×¨:",e),se(`× ×™×¡×™×•×Ÿ ×—×•×–×¨ × ×›×©×œ: ${e.message}`)}}),me=()=>{console.log("âŒ ×ž×‘×˜×œ ×ª×”×œ×™×š...");try{ae&&(ae.abort(),ne(null)),re&&(clearInterval(re),le(null)),x(!1),q(null),m(0),se(null),c(null),H(null),d(""),console.log("âœ… ×ª×”×œ×™×š ×‘×•×˜×œ")}catch(e){console.error("âŒ ×©×’×™××” ×‘×‘×™×˜×•×œ ×ª×”×œ×™×š:",e),se("×©×’×™××” ×‘×‘×™×˜×•×œ ×”×ª×”×œ×™×š - × ×¡×” ×©×•×‘")}},pe=()=>{try{Object.values(S).forEach(e=>{e&&(e.pause(),e.currentTime=0)}),w({}),v(null),P(0)}catch(e){console.error("âŒ ×©×’×™××” ×‘×¢×¦×™×¨×ª ×›×œ ×”×¢×¨×•×¦×™×:",e)}},he=()=>{try{G("upload"),X(!0),b(null),y({}),se(null),m(0),q(null),x(!1),pe(),re&&(clearInterval(re),le(null)),console.log("âœ… ×—×–×¨×” ×œ×ž×¡×š ×”×¢×œ××”")}catch(e){console.error("âŒ ×©×’×™××” ×‘×—×–×¨×” ×œ×ž×¡×š ×”×¢×œ××”:",e),se("×©×’×™××” ×‘×—×–×¨×” ×œ×ž×¡×š ×”×¢×œ××” - × ×¡×” ×©×•×‘")}};if(e.useEffect(()=>()=>{try{re&&clearInterval(re),ae&&ae.abort(),pe()}catch(e){console.error("âŒ ×©×’×™××” ×‘× ×™×§×•×™ ×”×§×•×ž×¤×•× × ×˜×”:",e)}},[re,ae]),"disconnected"===ce)return s.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"text-center space-y-6",children:[s.jsx("div",{className:"text-6xl",children:"ðŸŽµ"}),s.jsx("h1",{className:"text-3xl font-bold text-red-400",children:"×œ× × ×™×ª×Ÿ ×œ×”×ª×—×‘×¨ ×œ×©×¨×ª"}),s.jsx("p",{className:"text-gray-300 text-lg",children:"×”×©×¨×ª ×œ× ×–×ž×™×Ÿ ×›×¨×’×¢. ×× × × ×¡×” ×©×•×‘ ×ž××•×—×¨ ×™×•×ª×¨ ××• ×¤× ×” ×œ×ª×ž×™×›×”."}),oe&&s.jsx("div",{className:"bg-red-900/50 border border-red-500 rounded-lg p-4 max-w-md mx-auto",children:s.jsx("p",{className:"text-red-200",children:oe})}),s.jsx("button",{onClick:be,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"× ×¡×” ×©×•×‘"})]})})});if("checking"===ce)return s.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"text-center space-y-6",children:[s.jsx("div",{className:"text-6xl animate-pulse",children:"ðŸŽµ"}),s.jsx("h1",{className:"text-3xl font-bold",children:"×‘×•×“×§ ×—×™×‘×•×¨ ×œ×©×¨×ª..."}),s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"})]})})});const je=()=>M(void 0,null,function*(){console.log("ðŸ” [AudioSeparation] ×‘×•×“×§ ×¤×¨×•×™×§×˜×™× ×§×™×™×ž×™×...");try{console.log("ðŸ” [AudioSeparation] ×©×•×œ×— ×‘×§×©×” ×œ×©×¨×ª: GET /api/projects");const e=yield U();console.log("ðŸ” [AudioSeparation] ×ª×©×•×‘×” ×ž×”×©×¨×ª:",e),e&&e.length>0?(console.log(`ðŸ” [AudioSeparation] × ×ž×¦××• ${e.length} ×¤×¨×•×™×§×˜×™× ×‘×©×¨×ª`),h(e),localStorage.setItem("audioSeparationProjects",JSON.stringify(e))):console.log("ðŸ” [AudioSeparation] ×œ× × ×ž×¦××• ×¤×¨×•×™×§×˜×™× ×‘×©×¨×ª")}catch(e){console.error("âŒ [AudioSeparation] ×©×’×™××” ×‘×‘×“×™×§×ª ×¤×¨×•×™×§×˜×™× ×§×™×™×ž×™×:",e),console.log("ðŸ” [AudioSeparation] ×ž× ×¡×” ×œ×˜×¢×•×Ÿ ×¤×¨×•×™×§×˜×™× ×ž-localStorage...");const s=localStorage.getItem("audioSeparationProjects");s&&h(JSON.parse(s))}}),be=()=>M(void 0,null,function*(){console.log("ðŸ”„ [AudioSeparation] ×ž× ×¡×” ×—×™×‘×•×¨ ×ž×—×“×©...");try{console.log("ðŸ” [AudioSeparation] ×‘×•×“×§ ×—×™×‘×•×¨ ×œ×©×¨×ª...");const e=yield e();console.log("ðŸ” [AudioSeparation] ×‘×“×™×§×ª ×‘×¨×™××•×ª:",e),e&&"OK"===e.status?(console.log("âœ… [AudioSeparation] ×—×™×‘×•×¨ ×œ×©×¨×ª ×”×•×—×–×¨"),ie("connected"),yield je()):(console.log("âŒ [AudioSeparation] ×©×¨×ª ×œ× ×ž×’×™×‘"),ie("disconnected"))}catch(e){console.error("âŒ [AudioSeparation] ×©×’×™××” ×‘×‘×“×™×§×ª ×—×™×‘×•×¨:",e),ie("disconnected")}}),fe=()=>M(void 0,null,function*(){console.log("ðŸ” [AudioSeparation] ×‘×•×“×§ ×—×™×‘×•×¨ ×œ×©×¨×ª...");try{console.log("ðŸ” [AudioSeparation] ×©×•×œ×— ×‘×“×™×§×ª ×‘×¨×™××•×ª ×œ×©×¨×ª...");const e=yield e();console.log("ðŸ” [AudioSeparation] ×ª×©×•×‘×ª ×‘×“×™×§×ª ×‘×¨×™××•×ª:",e),e&&"OK"===e.status?(console.log("âœ… [AudioSeparation] ×©×¨×ª ×ž×—×•×‘×¨ ×•×¤×¢×™×œ"),ie("connected"),yield je()):(console.log("âŒ [AudioSeparation] ×©×¨×ª ×œ× ×ž×’×™×‘ ×›×¨××•×™"),ie("disconnected"))}catch(e){console.error("âŒ [AudioSeparation] ×©×’×™××” ×‘×‘×“×™×§×ª ×—×™×‘×•×¨ ×œ×©×¨×ª:",e),console.log("ðŸ” [AudioSeparation] ×¤×¨×˜×™ ×”×©×’×™××”:",{message:e.message,stack:e.stack,name:e.name}),ie("disconnected")}});return e.useEffect(()=>{if(Q)try{console.log("ðŸ“ ===== ×˜×¢×™× ×” ××•×˜×•×ž×˜×™×ª ×©×œ ×¤×¨×•×™×§×˜×™× ====="),console.log("â° ×–×ž×Ÿ ×˜×¢×™× ×”:",(new Date).toISOString()),M(void 0,null,function*(){console.log("ðŸ” [AudioSeparation] ×ž×ª×—×™×œ ×˜×¢×™× ×ª ×¤×¨×•×™×§×˜×™×...");try{console.log("ðŸ” [AudioSeparation] ×‘×•×“×§ ×¤×¨×•×™×§×˜×™× ×‘-localStorage...");const e=localStorage.getItem("audioSeparationProjects");e?(console.log("ðŸ” [AudioSeparation] × ×ž×¦××• ×¤×¨×•×™×§×˜×™× ×‘-localStorage:",JSON.parse(e).length),h(JSON.parse(e))):console.log("ðŸ” [AudioSeparation] ×œ× × ×ž×¦××• ×¤×¨×•×™×§×˜×™× ×‘-localStorage"),console.log("ðŸ” [AudioSeparation] ×ž× ×¡×” ×œ×˜×¢×•×Ÿ ×¤×¨×•×™×§×˜×™× ×ž×”×©×¨×ª...");const s=yield U();console.log("ðŸ” [AudioSeparation] ×ª×©×•×‘×” ×ž×”×©×¨×ª:",s),s&&s.length>0?(console.log("ðŸ” [AudioSeparation] × ×ž×¦××• ×¤×¨×•×™×§×˜×™× ×‘×©×¨×ª:",s.length),h(s),localStorage.setItem("audioSeparationProjects",JSON.stringify(s))):console.log("ðŸ” [AudioSeparation] ×œ× × ×ž×¦××• ×¤×¨×•×™×§×˜×™× ×‘×©×¨×ª")}catch(e){console.error("âŒ [AudioSeparation] ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×•×™×§×˜×™×:",e),console.log("ðŸ” [AudioSeparation] ×ž× ×¡×” ×œ×˜×¢×•×Ÿ ×¤×¨×•×™×§×˜×™× ×ž-localStorage ×‘×œ×‘×“...");const s=localStorage.getItem("audioSeparationProjects");s&&h(JSON.parse(s))}}),setTimeout(()=>{console.log("ðŸ” ===== ×‘×“×™×§×” ××•×˜×•×ž×˜×™×ª ×©×œ ×¤×¨×•×™×§×˜×™× ×§×™×™×ž×™× ====="),je()},3e3)}catch(e){console.error("âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×•×™×§×˜×™×:",e),se("×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×•×™×§×˜×™× - × ×¡×” ×œ×¨×¢× ×Ÿ ××ª ×”×“×£")}},[Q]),s.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[s.jsx("div",{className:"bg-gray-800 border-b border-gray-700",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(o,{className:"w-8 h-8 text-purple-400"}),s.jsx("h1",{className:"text-xl font-bold",children:"×”×¤×¨×“×ª ××•×“×™×• ×ž×ª×§×“×ž×ª"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:["connected"===ce?s.jsx(t,{className:"w-5 h-5 text-green-400"}):s.jsx(r,{className:"w-5 h-5 text-red-400"}),s.jsx("span",{className:"text-sm text-gray-300",children:"connected"===ce?"×ž×—×•×‘×¨":"×ž× ×•×ª×§"})]}),"studio"===V&&s.jsx("button",{onClick:he,className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"×¤×¨×•×™×§×˜ ×—×“×©"})]})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:"upload"===V?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"text-6xl",children:"ðŸŽµ"}),s.jsx("h2",{className:"text-3xl font-bold text-white",children:"×”×¤×¨×“×ª ××•×“×™×• ×ž×ª×§×“×ž×ª ×¢× AI"}),s.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"×”×¤×¨×“ ××ª ×”××•×“×™×• ×©×œ×š ×œ-5 ×¢×¨×•×¦×™× × ×¤×¨×“×™×: ×•×•×§××œ, ×‘×¡, ×ª×•×¤×™×, ×›×œ×™ × ×’×™× ×” ×•××—×¨"})]}),!u&&s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx(z,{onFileSelect:xe,disabled:u})}),u&&s.jsxs("div",{className:"max-w-2xl mx-auto",children:[console.log("ðŸ”„ ×ž×¦×™×’ ×ž×¡×š ×”×ª×§×“×ž×•×ª - isProcessing:",u,"step:",_,"progress:",g),s.jsx(J,{step:_,progress:g,error:ee,fileName:(null==n?void 0:n.name)||(null==K?void 0:K.name),onCancel:me,onRetry:j&&j.id?()=>retrySpecificProject(j.id):ge})]}),ee&&s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-red-900/50 border border-red-500 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(l,{className:"w-5 h-5 text-red-400"}),s.jsx("span",{className:"text-red-200",children:ee})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[s.jsxs("button",{onClick:je,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[s.jsx(a,{className:"w-4 h-4"}),s.jsx("span",{children:"×‘×“×•×§ ×¤×¨×•×™×§×˜×™× ×§×™×™×ž×™×"})]}),j&&j.id&&s.jsxs("button",{onClick:()=>retrySpecificProject(j.id),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[s.jsx(a,{className:"w-4 h-4"}),s.jsx("span",{children:"× ×¡×” ×œ×˜×¢×•×Ÿ ×©×•×‘"})]})]})]})}),!u&&p.length>0&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-center",children:"×¤×¨×•×™×§×˜×™× ×§×™×™×ž×™×"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(e=>s.jsx(Z,{project:e,onSelect:()=>ue(e.id),onDelete:()=>(e=>M(void 0,null,function*(){console.log(`ðŸ—‘ï¸ [AudioSeparation] ×ž×•×—×§ ×¤×¨×•×™×§×˜: ${e}`);try{console.log(`ðŸ” [AudioSeparation] ×©×•×œ×— ×‘×§×©×” ×ž×—×™×§×” ×œ×©×¨×ª: DELETE /api/projects/${e}`),yield(s=e,M(void 0,null,function*(){console.log(`ðŸ—‘ï¸ [API] ×ž×•×—×§ ×¤×¨×•×™×§×˜: id=${s}`);try{const e=performance.now(),o=yield D(`/api/projects/${s}`,{method:"DELETE"}),t=performance.now()-e;return console.log(`ðŸ—‘ï¸ [API] ×¤×¨×•×™×§×˜ × ×ž×—×§ ×‘: ${t.toFixed(0)}ms`),console.log("ðŸ—‘ï¸ [API] ×ª×•×¦××ª ×ž×—×™×§×”:",o),o}catch(e){throw console.error(`âŒ [API] ×©×’×™××” ×‘×ž×—×™×§×ª ×¤×¨×•×™×§×˜ ${s}:`,e),e}})),console.log("ðŸ” [AudioSeparation] ×¤×¨×•×™×§×˜ × ×ž×—×§ ×ž×”×©×¨×ª ×‘×”×¦×œ×—×”"),h(s=>s.filter(s=>s.id!==e)),(null==j?void 0:j.id)===e&&(b(null),G("upload"));const o=JSON.parse(localStorage.getItem("audioSeparationProjects")||"[]").filter(s=>s.id!==e);localStorage.setItem("audioSeparationProjects",JSON.stringify(o)),console.log("ðŸ” [AudioSeparation] ×¤×¨×•×™×§×˜ × ×ž×—×§ ×ž-localStorage")}catch(o){console.error(`âŒ [AudioSeparation] ×©×’×™××” ×‘×ž×—×™×§×ª ×¤×¨×•×™×§×˜ ${e}:`,o),console.log("ðŸ” [AudioSeparation] ×ž× ×¡×” ×œ×ž×—×•×§ ×ž-localStorage ×‘×œ×‘×“..."),h(s=>s.filter(s=>s.id!==e)),(null==j?void 0:j.id)===e&&(b(null),G("upload"));const s=JSON.parse(localStorage.getItem("audioSeparationProjects")||"[]").filter(s=>s.id!==e);localStorage.setItem("audioSeparationProjects",JSON.stringify(s))}var s}))(e.id)},e.id))})]})]}):s.jsxs("div",{className:"space-y-8",children:[console.log("ðŸ”„ ×ž×¦×™×’ ×ž×¡×š ×¡×˜×•×“×™×• - currentView:",V),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"×¡×˜×•×“×™×• ××•×“×™×•"}),j&&s.jsxs("p",{className:"text-gray-400",children:["×¤×¨×•×™×§×˜: ",j.name]})]}),s.jsx("button",{onClick:he,className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"×¤×¨×•×™×§×˜ ×—×“×©"})]}),Object.keys(f).length>0?s.jsx("div",{className:"space-y-6",children:Object.entries(f).map(([e,o])=>s.jsx(T,{trackId:e,trackData:o,isPlaying:N===e,volume:C[e]||1,isMuted:R[e]||!1,onPlay:()=>(e=>{try{if(N===e)S[e]&&(S[e].pause(),S[e].currentTime=0),v(null);else if(pe(),f[e]){const s=new Audio(f[e].url);s.volume=C[e]||1,s.muted=R[e]||!1,s.addEventListener("ended",()=>v(null)),s.addEventListener("timeupdate",()=>P(s.currentTime)),s.addEventListener("loadedmetadata",()=>I(s.duration)),s.play(),w(o=>E(O({},o),{[e]:s})),v(e)}}catch(s){console.error("âŒ ×©×’×™××” ×‘×”×¤×¢×œ×ª ×¢×¨×•×¥:",s),se("×©×’×™××” ×‘×”×¤×¢×œ×ª ×¢×¨×•×¥ - × ×¡×” ×©×•×‘")}})(e),onVolumeChange:s=>((e,s)=>{try{k(o=>E(O({},o),{[e]:s})),S[e]&&(S[e].volume=s)}catch(o){console.error("âŒ ×©×’×™××” ×‘×¢×“×›×•×Ÿ ×¢×•×¦×ž×ª ×¢×¨×•×¥:",o)}})(e,s),onMuteToggle:()=>(e=>{try{B(s=>E(O({},s),{[e]:!s[e]})),S[e]&&(S[e].muted=!R[e])}catch(s){console.error("âŒ ×©×’×™××” ×‘×¢×“×›×•×Ÿ ×”×©×ª×§×ª ×¢×¨×•×¥:",s)}})(e),onDownload:()=>((e,s)=>M(void 0,null,function*(){try{console.log("ðŸ“¥ ×ž×•×¨×™×“ ×¢×¨×•×¥:",s,"×ž×¤×¨×•×™×§×˜:",e);const r=yield(o=e,t=s,M(void 0,null,function*(){console.log(`â¬‡ï¸ [API] ×ž×•×¨×™×“ stem: projectId=${o}, stemName=${t}`);try{const e=performance.now(),s=yield fetch(`${L()}/api/projects/${o}/download/${t}`),r=performance.now()-e;if(console.log(`â¬‡ï¸ [API] ×”×•×¨×“×” ×”×•×©×œ×ž×” ×‘: ${r.toFixed(0)}ms`),console.log(`â¬‡ï¸ [API] ×¡×˜×˜×•×¡ ×”×•×¨×“×”: ${s.status} ${s.statusText}`),!s.ok){const e=yield s.text();throw console.error(`âŒ [API] ×©×’×™××” ×‘×”×•×¨×“×”: ${s.status} ${s.statusText}`),console.error("âŒ [API] ×ª×•×›×Ÿ ×©×’×™××”:",e),new Error(`×”×•×¨×“×” × ×›×©×œ×”: ${s.status} ${s.statusText}`)}const l=yield s.blob();return console.log(`âœ… [API] stem ×”×•×¨×“ ×‘×”×¦×œ×—×”, ×’×•×“×œ: ${l.size} bytes`),l}catch(e){throw console.error("âŒ [API] ×©×’×™××” ×‘×”×•×¨×“×ª stem:",e),e}}));if(!r||!r.url)throw new Error("×œ× ×”×ª×§×‘×œ ×§×™×©×•×¨ ×”×•×¨×“×” ×ž×”×©×¨×ª");{const o=document.createElement("a");o.href=r.url,o.download=`${s}_${e}.wav`,document.body.appendChild(o),o.click(),document.body.removeChild(o),console.log("âœ… ×¢×¨×•×¥ ×”×•×¨×“ ×‘×”×¦×œ×—×”")}}catch(r){console.error("âŒ ×©×’×™××” ×‘×”×•×¨×“×ª ×¢×¨×•×¥:",r);let e=r.message;r.message.includes("timeout")?e="×”×•×¨×“×ª ×¢×¨×•×¥ × ×›×©×œ×” - ×–×ž×Ÿ ×”×ž×ª× ×” ××¨×•×š ×ž×“×™":r.message.includes("Failed to fetch")?e="×œ× × ×™×ª×Ÿ ×œ×”×ª×—×‘×¨ ×œ×©×¨×ª - ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×œ××™× ×˜×¨× ×˜":r.message.includes("NetworkError")?e="×©×’×™××ª ×¨×©×ª - ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×œ××™× ×˜×¨× ×˜":r.message.includes("404")?e="×”×¢×¨×•×¥ ×œ× × ×ž×¦× - ×™×™×ª×›×Ÿ ×©×”×¤×¨×•×™×§×˜ ×œ× ×”×•×©×œ× ×¢×“×™×™×Ÿ":r.message.includes("403")?e="××™×Ÿ ×œ×š ×”×¨×©××” ×œ×”×•×¨×™×“ ×¢×¨×•×¥ ×–×”":r.message.includes("500")?e="×©×’×™××ª ×©×¨×ª - × ×¡×” ×©×•×‘ ×ž××•×—×¨ ×™×•×ª×¨":r.message.includes("503")&&(e="×”×©×¨×ª ×œ× ×–×ž×™×Ÿ ×›×¨×’×¢ - × ×¡×” ×©×•×‘ ×ž××•×—×¨ ×™×•×ª×¨"),se(e)}var o,t}))(j.id,e)},e))}):u?s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx(J,{step:_,progress:g,error:ee,fileName:(null==n?void 0:n.name)||(null==K?void 0:K.name),onCancel:me,onRetry:j&&j.id?()=>retrySpecificProject(j.id):ge})}):s.jsx(F,{})]})})]})};export{R as default};
//# sourceMappingURL=AudioSeparation-8d7d6840-399e3c47.js.map
