import{j as e,U as s,D as a,b as l,c as t,T as i,u as r,a as n,v as o,h as c,s as d,k as m,Z as h,t as x}from"./vendor-ui-000c090a.js";import{r as u}from"./vendor-react-7b33ae66.js";import{C as p,b,c as g,a as j}from"./components-ui-8500bbbb.js";import{L as y,u as v}from"./components-core-ee2bde8e.js";const f=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{u.useContext(y);const a=v();return e.jsxs("div",{className:"flex-1 bg-studio-dark p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(s,{className:"w-8 h-8 text-white ml-3"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:a("sessionManagement")})]}),e.jsx("p",{className:"text-gray-400 text-lg",children:a("sessionManagementDescription")})]}),e.jsx("div",{className:"max-w-4xl",children:e.jsxs(p,{className:"bg-studio-gray border-studio-gray",children:[e.jsx(b,{children:e.jsx(g,{className:"text-white text-2xl",children:a("mySessions")})}),e.jsx(j,{children:e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-studio-dark rounded-lg p-8 max-w-md mx-auto",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:a("creditsManagement")}),e.jsxs("div",{className:"space-y-3 text-gray-400",children:[e.jsx("p",{children:a("sessionModuleBuilding")}),e.jsx("p",{children:a("sessionManagementFeatures")})]})]})})})]})})]})}},Symbol.toStringTag,{value:"Module"})),N=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{u.useContext(y),v();const[n,o]=u.useState([]),[c,d]=u.useState([]),[m,h]=u.useState(""),[x,p]=u.useState("all"),[b,g]=u.useState("all"),[j,f]=u.useState("all"),[N,M]=u.useState("popularity");u.useState(!1);const[w,k]=u.useState(null),[S,C]=u.useState(null),[T,B]=u.useState(null),[R,D]=u.useState(!1),E=[{id:1,title:"Bohemian Rhapsody",artist:"Queen",album:"A Night at the Opera",genre:"Rock",key:"Bb Major",bpm:72,energy:.85,valence:.65,danceability:.45,popularity:95,releaseYear:1975,duration:354,spotifyId:"3z8h0TU7ReDPLIbEnYhWZb",camelot:"6B",acousticness:.12,instrumentalness:.08,liveness:.15,loudness:-8.2,speechiness:.03,tempo:72.4,timeSignature:4,mode:1,explicit:!1,country:"UK",language:"English"},{id:2,title:"Hotel California",artist:"Eagles",album:"Hotel California",genre:"Rock",key:"B Minor",bpm:75,energy:.78,valence:.42,danceability:.52,popularity:92,releaseYear:1976,duration:391,spotifyId:"40riOy7x9W7udXy6SA5vLA",camelot:"10A",acousticness:.18,instrumentalness:.25,liveness:.12,loudness:-7.8,speechiness:.04,tempo:75.2,timeSignature:4,mode:0,explicit:!1,country:"USA",language:"English"},{id:3,title:"Imagine",artist:"John Lennon",album:"Imagine",genre:"Pop",key:"C Major",bpm:76,energy:.45,valence:.78,danceability:.38,popularity:88,releaseYear:1971,duration:183,spotifyId:"7pKfPomDEeI4TPT6EOYjn9",camelot:"8B",acousticness:.85,instrumentalness:.02,liveness:.08,loudness:-12.5,speechiness:.03,tempo:76.1,timeSignature:4,mode:1,explicit:!1,country:"UK",language:"English"},{id:4,title:"Stairway to Heaven",artist:"Led Zeppelin",album:"Led Zeppelin IV",genre:"Rock",key:"A Minor",bpm:63,energy:.92,valence:.35,danceability:.28,popularity:94,releaseYear:1971,duration:482,spotifyId:"5CQ30WqJwcep0pYcV4AMNc",camelot:"8A",acousticness:.05,instrumentalness:.45,liveness:.22,loudness:-6.8,speechiness:.02,tempo:63.3,timeSignature:4,mode:0,explicit:!1,country:"UK",language:"English"},{id:5,title:"Billie Jean",artist:"Michael Jackson",album:"Thriller",genre:"Pop",key:"F# Minor",bpm:117,energy:.88,valence:.72,danceability:.95,popularity:96,releaseYear:1982,duration:294,spotifyId:"5ChkMS8OtdzJNyy4T0HhTv",camelot:"11A",acousticness:.08,instrumentalness:.12,liveness:.15,loudness:-5.2,speechiness:.06,tempo:117.2,timeSignature:4,mode:0,explicit:!1,country:"USA",language:"English"}];u.useEffect(()=>{o(E),d(E),P()},[]);const P=()=>{const e={totalSongs:n.length,genres:[...new Set(n.map(e=>e.genre))],keys:[...new Set(n.map(e=>e.key))],averageBPM:n.reduce((e,s)=>e+s.bpm,0)/n.length,averageEnergy:n.reduce((e,s)=>e+s.energy,0)/n.length,averageValence:n.reduce((e,s)=>e+s.valence,0)/n.length,averageDanceability:n.reduce((e,s)=>e+s.danceability,0)/n.length,mostPopularSong:n.reduce((e,s)=>s.popularity>e.popularity?s:e),newestSong:n.reduce((e,s)=>s.releaseYear>e.releaseYear?s:e),oldestSong:n.reduce((e,s)=>s.releaseYear<e.releaseYear?s:e)};k(e)};u.useEffect(()=>{let e=n;if(m&&(e=e.filter(e=>e.title.toLowerCase().includes(m.toLowerCase())||e.artist.toLowerCase().includes(m.toLowerCase())||e.album.toLowerCase().includes(m.toLowerCase()))),"all"!==x&&(e=e.filter(e=>e.genre===x)),"all"!==b&&(e=e.filter(e=>e.key===b)),"all"!==j){const[s,a]=j.split("-").map(Number);e=e.filter(e=>e.bpm>=s&&e.bpm<=a)}e.sort((e,s)=>{switch(N){case"popularity":return s.popularity-e.popularity;case"title":return e.title.localeCompare(s.title);case"artist":return e.artist.localeCompare(s.artist);case"bpm":return e.bpm-s.bpm;case"energy":return s.energy-e.energy;case"valence":return s.valence-e.valence;case"danceability":return s.danceability-e.danceability;case"releaseYear":return s.releaseYear-e.releaseYear;default:return 0}}),d(e)},[n,m,x,b,j,N]);const U=(e,s)=>{const a=.3,l=.2,t=.15,i=.15,r=.1,n=.1;return(e.genre===s.genre?1:0)*a+(e.key===s.key?1:.5)*l+(1-Math.abs(e.bpm-s.bpm)/200)*t+(1-Math.abs(e.energy-s.energy))*i+(1-Math.abs(e.valence-s.valence))*r+(1-Math.abs(e.danceability-s.danceability))*n},F=(e,s)=>{const a={};s.forEach(e=>{a[e.genre]=(a[e.genre]||0)+1});const l=Object.keys(a).reduce((e,s)=>a[e]>a[s]?e:s);return{mostCommonGenre:l,genreDistribution:a,primaryGenreMatch:e.genre===l}},A=(e,s)=>{const a={};s.forEach(e=>{a[e.key]=(a[e.key]||0)+1});const l=Object.keys(a).reduce((e,s)=>a[e]>a[s]?e:s);return{mostCommonKey:l,keyDistribution:a,keyCompatibility:L(e.key,l)}},L=(e,s)=>{var a;return(null==(a={"C Major":["G Major","F Major","A Minor"],"G Major":["C Major","D Major","E Minor"],"D Major":["G Major","A Major","B Minor"],"A Major":["D Major","E Major","F# Minor"],"E Major":["A Major","B Major","C# Minor"],"B Major":["E Major","F# Major","G# Minor"],"F Major":["C Major","Bb Major","D Minor"],"Bb Major":["F Major","Eb Major","G Minor"],"Eb Major":["Bb Major","Ab Major","C Minor"],"Ab Major":["Eb Major","Db Major","F Minor"]}[e])?void 0:a.includes(s))||e===s},O=(e,s)=>{const a=s.reduce((e,s)=>e+s.bpm,0)/s.length,l=Math.abs(e.bpm-a);return{averageBPM:a,bpmDifference:l,tempoCompatibility:l<20?"מתאים":l<40?"בינוני":"לא מתאים"}},q=(e,s)=>{const a=s.reduce((e,s)=>e+s.energy,0)/s.length,l=s.reduce((e,s)=>e+s.valence,0)/s.length,t=Math.abs(e.energy-a),i=Math.abs(e.valence-l);return{averageEnergy:a,averageValence:l,energyDifference:t,valenceDifference:i,moodCompatibility:(t+i)/2<.3?"מתאים":"לא מתאים"}},I=(e="json")=>{const s={songs:c,stats:w,exportDate:(new Date).toISOString(),totalSongs:c.length};if("json"===e){const e=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),a=URL.createObjectURL(e),l=document.createElement("a");l.href=a,l.download="music-database.json",l.click(),URL.revokeObjectURL(a)}else if("csv"===e){const e=G(c),s=new Blob([e],{type:"text/csv"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download="music-database.csv",l.click(),URL.revokeObjectURL(a)}},G=e=>{const s=[["Title","Artist","Album","Genre","Key","BPM","Energy","Valence","Danceability","Popularity"].join(",")];return e.forEach(e=>{const a=[e.title,e.artist,e.album,e.genre,e.key,e.bpm,e.energy,e.valence,e.danceability,e.popularity].map(e=>`"${e}"`).join(",");s.push(a)}),s.join("\n")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 text-white p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold mb-4 flex items-center justify-center gap-3",children:[e.jsx(a,{className:"w-8 h-8 text-blue-400"}),"בסיס נתוני מוזיקה מתקדם"]}),e.jsx("p",{className:"text-xl text-gray-300",children:"ניתוח מתקדם של שירים עם נתונים מ-Spotify API וניתוח דמיון"})]}),w&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(l,{className:"w-6 h-6 text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold",children:'סה"כ שירים'})]}),e.jsx("p",{className:"text-3xl font-bold",children:w.totalSongs})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(t,{className:"w-6 h-6 text-green-400"}),e.jsx("h3",{className:"text-lg font-semibold",children:"ז'אנרים"})]}),e.jsx("p",{className:"text-3xl font-bold",children:w.genres.length})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(i,{className:"w-6 h-6 text-yellow-400"}),e.jsx("h3",{className:"text-lg font-semibold",children:"BPM ממוצע"})]}),e.jsx("p",{className:"text-3xl font-bold",children:w.averageBPM.toFixed(0)})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(s,{className:"w-6 h-6 text-red-400"}),e.jsx("h3",{className:"text-lg font-semibold",children:"פופולריות ממוצעת"})]}),e.jsx("p",{className:"text-3xl font-bold",children:(n.reduce((e,s)=>e+s.popularity,0)/n.length).toFixed(0)})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"חיפוש"}),e.jsx("input",{type:"text",placeholder:"חיפוש שירים, אמנים, אלבומים...",value:m,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 bg-white/20 rounded-lg border border-white/30 focus:outline-none focus:border-blue-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"ז'אנר"}),e.jsxs("select",{value:x,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 bg-white/20 rounded-lg border border-white/30 focus:outline-none focus:border-blue-400",children:[e.jsx("option",{value:"all",children:"כל הז'אנרים"}),null==w?void 0:w.genres.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"מפתח"}),e.jsxs("select",{value:b,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 bg-white/20 rounded-lg border border-white/30 focus:outline-none focus:border-blue-400",children:[e.jsx("option",{value:"all",children:"כל המפתחות"}),null==w?void 0:w.keys.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"מיון"}),e.jsxs("select",{value:N,onChange:e=>M(e.target.value),className:"w-full px-4 py-2 bg-white/20 rounded-lg border border-white/30 focus:outline-none focus:border-blue-400",children:[e.jsx("option",{value:"popularity",children:"פופולריות"}),e.jsx("option",{value:"title",children:"כותרת"}),e.jsx("option",{value:"artist",children:"אמן"}),e.jsx("option",{value:"bpm",children:"BPM"}),e.jsx("option",{value:"energy",children:"אנרגיה"}),e.jsx("option",{value:"valence",children:"Valence"}),e.jsx("option",{value:"danceability",children:"Danceability"}),e.jsx("option",{value:"releaseYear",children:"שנת יציאה"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>D(!R),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg",children:[e.jsx(r,{className:"w-4 h-4"}),"סינון מתקדם"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I("json"),className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg",children:"ייצוא JSON"}),e.jsx("button",{onClick:()=>I("csv"),className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg",children:"ייצוא CSV"})]})]}),R&&e.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"טווח BPM"}),e.jsxs("select",{value:j,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 bg-white/20 rounded-lg border border-white/30",children:[e.jsx("option",{value:"all",children:"כל הטווחים"}),e.jsx("option",{value:"60-80",children:"60-80 (איטי)"}),e.jsx("option",{value:"80-100",children:"80-100 (בינוני)"}),e.jsx("option",{value:"100-120",children:"100-120 (מהיר)"}),e.jsx("option",{value:"120-140",children:"120-140 (מאוד מהיר)"})]})]})})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold",children:["שירים (",c.length,")"]}),e.jsx("button",{onClick:()=>{const e=["Rock","Pop","Jazz","Blues","Country","Electronic","Hip Hop","Classical"],s=["C Major","G Major","D Major","A Major","E Major","B Major","F Major","Bb Major"],a=["The Beatles","Pink Floyd","David Bowie","Bob Dylan","Nirvana","Radiohead","U2","Coldplay"],l=[];for(let t=6;t<=50;t++)l.push({id:t,title:`Song ${t}`,artist:a[Math.floor(Math.random()*a.length)],album:`Album ${Math.floor(10*Math.random())+1}`,genre:e[Math.floor(Math.random()*e.length)],key:s[Math.floor(Math.random()*s.length)],bpm:Math.floor(140*Math.random())+60,energy:Math.random(),valence:Math.random(),danceability:Math.random(),popularity:Math.floor(100*Math.random()),releaseYear:Math.floor(50*Math.random())+1970,duration:Math.floor(300*Math.random())+120,spotifyId:`spotify:track:${Math.random().toString(36).substr(2,22)}`,camelot:`${Math.floor(12*Math.random())+1}${Math.random()>.5?"B":"A"}`,acousticness:Math.random(),instrumentalness:Math.random(),liveness:Math.random(),loudness:-20*Math.random()-10,speechiness:Math.random(),tempo:Math.floor(140*Math.random())+60,timeSignature:Math.floor(4*Math.random())+3,mode:Math.floor(2*Math.random()),explicit:Math.random()>.8,country:Math.random()>.5?"USA":"UK",language:"English"});o([...E,...l])},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg",children:"הוסף נתונים מדומים"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/20",children:[e.jsx("th",{className:"text-right p-3",children:"שיר"}),e.jsx("th",{className:"text-right p-3",children:"אמן"}),e.jsx("th",{className:"text-right p-3",children:"ז'אנר"}),e.jsx("th",{className:"text-right p-3",children:"מפתח"}),e.jsx("th",{className:"text-right p-3",children:"BPM"}),e.jsx("th",{className:"text-right p-3",children:"אנרגיה"}),e.jsx("th",{className:"text-right p-3",children:"Valence"}),e.jsx("th",{className:"text-right p-3",children:"Danceability"}),e.jsx("th",{className:"text-right p-3",children:"פופולריות"}),e.jsx("th",{className:"text-right p-3",children:"פעולות"})]})}),e.jsx("tbody",{children:c.map(s=>e.jsxs("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s.title}),e.jsx("div",{className:"text-sm text-gray-300",children:s.album})]})}),e.jsx("td",{className:"p-3",children:s.artist}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"px-2 py-1 bg-blue-600/30 rounded text-sm",children:s.genre})}),e.jsx("td",{className:"p-3",children:s.key}),e.jsx("td",{className:"p-3",children:s.bpm}),e.jsxs("td",{className:"p-3",children:[(100*s.energy).toFixed(0),"%"]}),e.jsxs("td",{className:"p-3",children:[(100*s.valence).toFixed(0),"%"]}),e.jsxs("td",{className:"p-3",children:[(100*s.danceability).toFixed(0),"%"]}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-green-400 h-2 rounded-full",style:{width:`${s.popularity}%`}})}),e.jsx("span",{className:"text-sm",children:s.popularity})]})}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>{B(s),(e=>{if(!e)return;const s=n.filter(s=>s.id!==e.id).map(s=>{const a=U(e,s);return{...s,similarity:a}}).sort((e,s)=>s.similarity-e.similarity).slice(0,10);C({selectedSong:e,similarSongs:s,analysis:{genreSimilarity:F(e,s),keyCompatibility:A(e,s),tempoCompatibility:O(e,s),moodCompatibility:q(e,s)}})})(s)},className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm",children:"ניתוח דמיון"})})]},s.id))})]})})]}),S&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-6",children:["ניתוח דמיון: ",S.selectedSong.title]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"שירים דומים"}),e.jsx("div",{className:"space-y-3",children:S.similarSongs.slice(0,5).map((s,a)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s.title}),e.jsx("div",{className:"text-sm text-gray-300",children:s.artist})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold",children:[(100*s.similarity).toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-300",children:s.genre})]})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"ניתוח מפורט"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"ז'אנר דומיננטי"}),e.jsxs("p",{className:"text-gray-300",children:[S.analysis.genreSimilarity.mostCommonGenre,S.analysis.genreSimilarity.primaryGenreMatch&&e.jsx("span",{className:"text-green-400 ml-2",children:"✓ תואם"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"תאימות מפתח"}),e.jsxs("p",{className:"text-gray-300",children:[S.analysis.keyCompatibility.mostCommonKey,S.analysis.keyCompatibility.keyCompatibility&&e.jsx("span",{className:"text-green-400 ml-2",children:"✓ תואם"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"תאימות קצב"}),e.jsxs("p",{className:"text-gray-300",children:["BPM ממוצע: ",S.analysis.tempoCompatibility.averageBPM.toFixed(0),e.jsx("br",{}),"הבדל: ",S.analysis.tempoCompatibility.bpmDifference.toFixed(0)," BPM",e.jsx("br",{}),"תאימות: ",S.analysis.tempoCompatibility.tempoCompatibility]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"תאימות מצב רוח"}),e.jsxs("p",{className:"text-gray-300",children:["אנרגיה ממוצעת: ",(100*S.analysis.moodCompatibility.averageEnergy).toFixed(0),"%",e.jsx("br",{}),"Valence ממוצע: ",(100*S.analysis.moodCompatibility.averageValence).toFixed(0),"%",e.jsx("br",{}),"תאימות: ",S.analysis.moodCompatibility.moodCompatibility]})]})]})]})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),M=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{var s;u.useContext(y),v();const[a,t]=u.useState(null),[i,r]=u.useState(!1),[p,b]=u.useState(0),[g,j]=u.useState(null),[f,N]=u.useState("idle"),[M,w]=u.useState(0),[k,S]=u.useState([]),[C,T]=u.useState([]),[B,R]=u.useState("vocal-removal"),[D,E]=u.useState({quality:"high",gpuType:"RTX-4090",batchSize:1,priority:"normal"}),P={"vocal-removal":{name:"הסרת ווקאלים",description:"הסרת קול מהשיר באמצעות AI מתקדם",estimatedTime:"2-3 דקות",gpuRequired:!0,quality:"high"},mastering:{name:"Mastering אוטומטי",description:"עיבוד אוטומטי של השיר לרמה מקצועית",estimatedTime:"3-5 דקות",gpuRequired:!0,quality:"high"},"stem-separation":{name:"הפרדת רכיבים",description:"הפרדת השיר לרכיבים: תופים, בס, מלודיה, ווקאלים",estimatedTime:"4-6 דקות",gpuRequired:!0,quality:"high"},"noise-reduction":{name:"הפחתת רעשים",description:"הסרת רעשים ורעשי רקע מהשיר",estimatedTime:"1-2 דקות",gpuRequired:!1,quality:"medium"},"pitch-correction":{name:"תיקון פיץ'",description:"תיקון אוטומטי של פיץ' הווקאלים",estimatedTime:"2-3 דקות",gpuRequired:!0,quality:"high"},"tempo-change":{name:"שינוי קצב",description:"שינוי קצב השיר ללא פגיעה באיכות",estimatedTime:"1-2 דקות",gpuRequired:!1,quality:"medium"}};u.useEffect(()=>{N("ready"),w(30*Math.random()+10)},[]);const U=e=>{const s={...e,status:"completed",endTime:new Date,processingTime:new Date-e.startTime,results:F(e.operation)};T(e=>[s,...e]),S(s=>s.filter(s=>s.id!==e.id)),j(s.results),r(!1),b(0),N("ready")},F=e=>{const s={originalFile:a.name,processedFile:`${a.name.replace(/\.[^/.]+$/,"")}_processed.wav`,fileSize:Math.floor(50*Math.random())+10,processingTime:Math.floor(180*Math.random())+60,quality:D.quality,gpuUsed:D.gpuType};switch(e){case"vocal-removal":return{...s,vocalsRemoved:!0,instrumentalQuality:.3*Math.random()+.7,artifacts:.2*Math.random(),recommendation:"השיר עובד בהצלחה. הווקאלים הוסרו עם איכות גבוהה."};case"mastering":return{...s,loudness:10*Math.random()-5,dynamicRange:20*Math.random()+10,frequencyBalance:.3*Math.random()+.7,recommendation:"השיר עובד בהצלחה. ה-Mastering הושלם ברמה מקצועית."};case"stem-separation":return{...s,stems:["drums.wav","bass.wav","melody.wav","vocals.wav"],separationQuality:.3*Math.random()+.7,recommendation:"השיר הופרד בהצלחה ל-4 רכיבים נפרדים."};case"noise-reduction":return{...s,noiseReduction:.4*Math.random()+.6,signalQuality:.3*Math.random()+.7,recommendation:"הרעשים הופחתו בהצלחה תוך שמירה על איכות השיר."};case"pitch-correction":return{...s,pitchCorrections:Math.floor(20*Math.random())+5,correctionAccuracy:.3*Math.random()+.7,recommendation:"הפיץ' תוקן בהצלחה עם דיוק גבוה."};case"tempo-change":return{...s,originalTempo:Math.floor(60*Math.random())+80,newTempo:Math.floor(60*Math.random())+80,tempoChange:Math.floor(40*Math.random())-20,recommendation:"הקצב שונה בהצלחה ללא פגיעה באיכות."};default:return s}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 text-white p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold mb-4 flex items-center justify-center gap-3",children:[e.jsx(n,{className:"w-8 h-8 text-blue-400"}),"עיבוד בענן עם GPU"]}),e.jsx("p",{className:"text-xl text-gray-300",children:"עיבוד מתקדם בענן עם GPU חזק ומודלים של AI"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(o,{className:"w-6 h-6 text-green-400"}),e.jsx("h3",{className:"text-lg font-semibold",children:"סטטוס שרת"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"סטטוס:"}),e.jsx("span",{className:"font-semibold "+("ready"===f?"text-green-400":"processing"===f?"text-yellow-400":"text-red-400"),children:"ready"===f?"מוכן":"processing"===f?"מעבד":"לא זמין"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"GPU:"}),e.jsx("span",{className:"font-semibold",children:D.gpuType})]})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(c,{className:"w-6 h-6 text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold",children:"שימוש GPU"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"שימוש:"}),e.jsxs("span",{className:"font-semibold",children:[M.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${M}%`}})})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(d,{className:"w-6 h-6 text-yellow-400"}),e.jsx("h3",{className:"text-lg font-semibold",children:"תור עיבוד"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"בתור:"}),e.jsx("span",{className:"font-semibold",children:k.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"הושלמו:"}),e.jsx("span",{className:"font-semibold",children:C.length})]})]})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 mb-8",children:[e.jsxs("div",{className:"border-2 border-dashed border-blue-400 rounded-xl p-8 text-center hover:border-blue-300 transition-colors cursor-pointer",onDrop:e=>{e.preventDefault();const s=e.dataTransfer.files;s.length>0&&s[0].type.startsWith("audio/")&&t(s[0])},onDragOver:e=>{e.preventDefault()},onClick:()=>document.getElementById("cloud-file-upload").click(),children:[e.jsx(m,{className:"w-16 h-16 mx-auto mb-4 text-blue-400"}),e.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"העלה קובץ לעיבוד"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"גרור קובץ שמע לכאן או לחץ לבחירה"}),e.jsx("input",{id:"cloud-file-upload",type:"file",accept:"audio/*",onChange:e=>{const s=e.target.files[0];s&&s.type.startsWith("audio/")&&t(s)},className:"hidden"}),a&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-900/50 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-300",children:[(a.size/1024/1024).toFixed(2)," MB"]})]})]}),a&&e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"בחר פעולת עיבוד"}),e.jsx("div",{className:"space-y-3",children:Object.entries(P).map(([s,a])=>e.jsxs("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-colors "+(B===s?"border-blue-400 bg-blue-900/30":"border-gray-600 hover:border-gray-500"),onClick:()=>R(s),children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold",children:a.name}),a.gpuRequired&&e.jsx(c,{className:"w-4 h-4 text-blue-400"})]}),e.jsx("p",{className:"text-sm text-gray-300 mb-2",children:a.description}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsxs("span",{children:["זמן משוער: ",a.estimatedTime]}),e.jsxs("span",{children:["איכות: ",a.quality]})]})]},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"הגדרות עיבוד"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"איכות עיבוד"}),e.jsxs("select",{value:D.quality,onChange:e=>E(s=>({...s,quality:e.target.value})),className:"w-full px-4 py-2 bg-white/20 rounded-lg border border-white/30",children:[e.jsx("option",{value:"low",children:"נמוכה (מהיר)"}),e.jsx("option",{value:"medium",children:"בינונית"}),e.jsx("option",{value:"high",children:"גבוהה (איטי)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"סוג GPU"}),e.jsxs("select",{value:D.gpuType,onChange:e=>E(s=>({...s,gpuType:e.target.value})),className:"w-full px-4 py-2 bg-white/20 rounded-lg border border-white/30",children:[e.jsx("option",{value:"RTX-4090",children:"RTX 4090 (הכי חזק)"}),e.jsx("option",{value:"RTX-4080",children:"RTX 4080"}),e.jsx("option",{value:"RTX-3090",children:"RTX 3090"}),e.jsx("option",{value:"CPU-only",children:"CPU בלבד"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"עדיפות"}),e.jsxs("select",{value:D.priority,onChange:e=>E(s=>({...s,priority:e.target.value})),className:"w-full px-4 py-2 bg-white/20 rounded-lg border border-white/30",children:[e.jsx("option",{value:"low",children:"נמוכה"}),e.jsx("option",{value:"normal",children:"רגילה"}),e.jsx("option",{value:"high",children:"גבוהה"})]})]}),e.jsx("button",{onClick:async()=>{if(!a)return;r(!0),b(0),N("processing");const e=P[B],s=3e4*Math.random()+15e3,l=s/100,t={id:Date.now(),file:a.name,operation:B,operationName:e.name,startTime:new Date,status:"processing",progress:0};S(e=>[...e,t]);const i=setInterval(()=>{b(e=>{const s=e+1;return s>=100?(clearInterval(i),U(t),100):(S(e=>e.map(e=>e.id===t.id?{...e,progress:s}:e)),s)})},l),n=setInterval(()=>{w(e=>{const s=e+(10*Math.random()-5);return Math.max(10,Math.min(90,s))})},1e3);setTimeout(()=>{clearInterval(n)},s)},disabled:i||!a,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"מעבד..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-5 h-5"}),"התחל עיבוד בענן"]})})]})]})]})]}),i&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"התקדמות העיבוד"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-purple-400 h-4 rounded-full transition-all duration-300",style:{width:`${p}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[p,"% הושלם"]}),e.jsx("span",{children:null==(s=P[B])?void 0:s.estimatedTime})]})]})]}),g&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"תוצאות העיבוד"}),e.jsxs("button",{onClick:()=>{if(!g)return;const e={results:g,timestamp:(new Date).toISOString(),settings:D},s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=`cloud-processing-results-${Date.now()}.json`,l.click(),URL.revokeObjectURL(a)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg",children:[e.jsx(x,{className:"w-4 h-4"}),"הורד תוצאות"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"פרטי העיבוד"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"קובץ מקורי:"}),e.jsx("span",{children:g.originalFile})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"קובץ מעובד:"}),e.jsx("span",{children:g.processedFile})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"גודל קובץ:"}),e.jsxs("span",{children:[g.fileSize," MB"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"זמן עיבוד:"}),e.jsxs("span",{children:[Math.floor(g.processingTime/60),":",(g.processingTime%60).toString().padStart(2,"0")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"איכות:"}),e.jsx("span",{children:g.quality})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"GPU:"}),e.jsx("span",{children:g.gpuUsed})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"המלצות"}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:g.recommendation}),g.stems&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"font-semibold mb-2",children:"רכיבים שנוצרו:"}),e.jsx("div",{className:"space-y-1",children:g.stems.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(l,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{children:s})]},a))})]})]})]})]}),C.length>0&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"היסטוריית עיבוד"}),e.jsx("div",{className:"space-y-3",children:C.slice(0,5).map(s=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s.operationName}),e.jsx("div",{className:"text-sm text-gray-300",children:s.file})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-300",children:new Date(s.startTime).toLocaleString("he-IL")}),e.jsxs("div",{className:"text-sm text-green-400",children:[Math.floor(s.processingTime/1e3),"s"]})]})]},s.id))})]})]})})}},Symbol.toStringTag,{value:"Module"}));export{M as C,N as M,f as S};
